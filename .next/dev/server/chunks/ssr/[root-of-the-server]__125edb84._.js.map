{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/authservice/api.jsx"],"sourcesContent":["// app/authservice/page.jsx\n\"use client\";\n\nimport axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\n\nconst BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ||\n  \"https://mediposbackend.onrender.com/api\";\n\n/**\n * Generic API request function\n */\nexport async function apiRequest(\n  endpoint,\n  {\n    method = \"GET\",\n    data = null,\n    headers = {},\n    includeAuth = false,\n    formData = false,\n    successMessage = null,\n    timeout = 30 * 60 * 1000, // 30 minutes\n    params = null,\n    onUploadProgress = null,\n  } = {}\n) {\n  try {\n    let finalHeaders = { ...headers };\n\n    // ---------------------------------------------------------\n    // Handle Content-Type logic\n    // ---------------------------------------------------------\n    if (formData) {\n      // VERY IMPORTANT: Do NOT set Content-Type here\n      // Browser will generate correct boundary\n      delete finalHeaders[\"Content-Type\"];\n    } else if (data && typeof data === \"object\") {\n      finalHeaders[\"Content-Type\"] = \"application/json\";\n      data = JSON.stringify(data);\n    }\n\n    // ---------------------------------------------------------\n    // Authorization Header\n    // ---------------------------------------------------------\n    if (includeAuth && typeof window !== \"undefined\") {\n      const token = localStorage.getItem(\"authToken\");\n      if (token) finalHeaders[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    // ---------------------------------------------------------\n    // Create Request URL\n    // ---------------------------------------------------------\n    const url = `${BASE_URL}${endpoint.startsWith(\"/\") ? endpoint : \"/\" + endpoint}`;\n\n    console.log(\"API Request:\", {\n      url,\n      method,\n      sendingFormData: formData,\n      headers: finalHeaders,\n      params,\n      data,\n    });\n\n    // ---------------------------------------------------------\n    // Axios Config\n    // ---------------------------------------------------------\n    const config = {\n      url,\n      method: method.toUpperCase(),\n      headers: finalHeaders,\n      timeout,\n      maxBodyLength: Infinity,\n      maxContentLength: Infinity,\n    };\n\n    if (params) config.params = params;\n\n    if (typeof onUploadProgress === \"function\") {\n      config.onUploadProgress = onUploadProgress;\n    }\n\n    // Attach body only for non-GET/HEAD\n    if (![\"GET\", \"HEAD\"].includes(config.method)) {\n      config.data = data;\n    }\n\n    // ---------------------------------------------------------\n    // Make Request\n    // ---------------------------------------------------------\n    const response = await axios(config);\n\n    // ---------------------------------------------------------\n    // Success Toast\n    // ---------------------------------------------------------\n    const msg = successMessage || response.data?.message;\n    if (msg && typeof window !== \"undefined\") {\n      toast.success(msg);\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(\"API Request Error:\", error);\n\n    const errorMessage =\n      error.response?.data?.message ||\n      error.response?.data?.error ||\n      (error.code === \"ECONNABORTED\"\n        ? \"Request timed out. Please try again.\"\n        : null) ||\n      (error.message?.includes(\"Network Error\")\n        ? \"Network error â€” check your internet connection.\"\n        : null) ||\n      error.message ||\n      \"Something went wrong\";\n\n    if (typeof window !== \"undefined\") toast.error(errorMessage);\n\n    throw new Error(errorMessage);\n  }\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAG3B;AACA;AAHA;;;AAKA,MAAM,WACJ,QAAQ,GAAG,CAAC,wBAAwB,IACpC;AAKK,eAAe,WACpB,QAAQ,EACR,EACE,SAAS,KAAK,EACd,OAAO,IAAI,EACX,UAAU,CAAC,CAAC,EACZ,cAAc,KAAK,EACnB,WAAW,KAAK,EAChB,iBAAiB,IAAI,EACrB,UAAU,KAAK,KAAK,IAAI,EACxB,SAAS,IAAI,EACb,mBAAmB,IAAI,EACxB,GAAG,CAAC,CAAC;IAEN,IAAI;QACF,IAAI,eAAe;YAAE,GAAG,OAAO;QAAC;QAEhC,4DAA4D;QAC5D,4BAA4B;QAC5B,4DAA4D;QAC5D,IAAI,UAAU;YACZ,+CAA+C;YAC/C,yCAAyC;YACzC,OAAO,YAAY,CAAC,eAAe;QACrC,OAAO,IAAI,QAAQ,OAAO,SAAS,UAAU;YAC3C,YAAY,CAAC,eAAe,GAAG;YAC/B,OAAO,KAAK,SAAS,CAAC;QACxB;QAEA,4DAA4D;QAC5D,uBAAuB;QACvB,4DAA4D;QAC5D;;QAKA,4DAA4D;QAC5D,qBAAqB;QACrB,4DAA4D;QAC5D,MAAM,MAAM,GAAG,WAAW,SAAS,UAAU,CAAC,OAAO,WAAW,MAAM,UAAU;QAEhF,QAAQ,GAAG,CAAC,gBAAgB;YAC1B;YACA;YACA,iBAAiB;YACjB,SAAS;YACT;YACA;QACF;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,SAAS;YACb;YACA,QAAQ,OAAO,WAAW;YAC1B,SAAS;YACT;YACA,eAAe;YACf,kBAAkB;QACpB;QAEA,IAAI,QAAQ,OAAO,MAAM,GAAG;QAE5B,IAAI,OAAO,qBAAqB,YAAY;YAC1C,OAAO,gBAAgB,GAAG;QAC5B;QAEA,oCAAoC;QACpC,IAAI,CAAC;YAAC;YAAO;SAAO,CAAC,QAAQ,CAAC,OAAO,MAAM,GAAG;YAC5C,OAAO,IAAI,GAAG;QAChB;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,WAAW,MAAM,IAAA,gJAAK,EAAC;QAE7B,4DAA4D;QAC5D,gBAAgB;QAChB,4DAA4D;QAC5D,MAAM,MAAM,kBAAkB,SAAS,IAAI,EAAE;QAC7C;;QAIA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,MAAM,eACJ,MAAM,QAAQ,EAAE,MAAM,WACtB,MAAM,QAAQ,EAAE,MAAM,SACtB,CAAC,MAAM,IAAI,KAAK,iBACZ,yCACA,IAAI,KACR,CAAC,MAAM,OAAO,EAAE,SAAS,mBACrB,oDACA,IAAI,KACR,MAAM,OAAO,IACb;QAEF;;QAEA,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/appointments/Header.jsx"],"sourcesContent":["import React from \"react\";\nimport { Plus } from \"lucide-react\";\n\nconst Header = ({ title, description, onNew }) => (\n  <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n    <div>\n      <h1 className=\"text-2xl font-bold text-slate-900\">{title}</h1>\n      <p className=\"text-slate-600 mt-1\">{description}</p>\n    </div>\n    <button\n      onClick={onNew}\n      className=\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium\n                 transition-colors h-9 px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-600\n                 hover:from-teal-600 hover:to-teal-700 shadow-lg text-white\"\n    >\n      <Plus className=\"w-5 h-5\" />\n      New Appointment\n    </button>\n  </div>\n);\n\nexport default Header;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,MAAM,SAAS,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,iBAC3C,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,8OAAC;wBAAE,WAAU;kCAAuB;;;;;;;;;;;;0BAEtC,8OAAC;gBACC,SAAS;gBACT,WAAU;;kCAIV,8OAAC,0MAAI;wBAAC,WAAU;;;;;;oBAAY;;;;;;;;;;;;;uCAMnB"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/appointments/AppointmentList.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { FaTrash } from \"react-icons/fa\";\nimport { Clock, Stethoscope, Check, Printer } from \"lucide-react\";\nimport { apiRequest } from \"@/app/authservice/api\";\nimport { toast } from \"react-hot-toast\";\n\nconst AppointmentList = ({ onEdit }) => {\n  const [appointments, setAppointments] = useState([]);\n  const [statusFilter, setStatusFilter] = useState(\"All\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch appointments from API\n  const fetchAppointments = async () => {\n    try {\n      setLoading(true);\n      const res = await apiRequest(\"/appointments\");\n      if (res?.success && Array.isArray(res.data)) {\n        setAppointments(res.data);\n      } else {\n        setAppointments([]);\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch appointments:\", err);\n      toast.error(\"Failed to fetch appointments\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAppointments();\n  }, []);\n\n  // Filter appointments based on status, search, and selected date\n  const filteredAppointments = appointments.filter((appt) => {\n    const matchesStatus = statusFilter === \"All\" || appt.status === statusFilter;\n    const matchesSearch = appt.patient.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesDate = selectedDate\n      ? new Date(appt.date).toDateString() === selectedDate.toDateString()\n      : true;\n    return matchesStatus && matchesSearch && matchesDate;\n  });\n\n  // Update appointment status locally\n  const updateStatus = (id, newStatus) => {\n    setAppointments((prev) =>\n      prev.map((appt) =>\n        appt._id === id ? { ...appt, status: newStatus } : appt\n      )\n    );\n  };\n\n  // Delete appointment\n  const deleteAppointment = async (id) => {\n    try {\n      await apiRequest(`/appointments/deleteAppointment/${id}`, {\n        method: \"DELETE\",\n      });\n      setAppointments((prev) => prev.filter((appt) => appt._id !== id));\n      toast.success(\"Appointment deleted successfully\");\n    } catch (error) {\n      console.error(\"Failed to delete appointment:\", error);\n      toast.error(\n        error?.response?.data?.message || \"Failed to delete appointment\"\n      );\n    }\n  };\n\n  const getBadgeClasses = (status) => {\n    switch (status) {\n      case \"Scheduled\":\n        return \"bg-purple-100 text-purple-800 border border-purple-200\";\n      case \"Confirmed\":\n        return \"bg-teal-100 text-teal-800 border border-teal-200\";\n      case \"Completed\":\n        return \"bg-green-100 text-green-800 border border-green-200\";\n      case \"Cancelled\":\n        return \"bg-red-100 text-red-800 border border-red-200\";\n      default:\n        return \"bg-teal-100 text-teal-800 border border-teal-200\";\n    }\n  };\n\n  // Get token numbers only for confirmed patients\n  const confirmedAppointments = appointments\n    .filter((a) => a.status === \"Confirmed\")\n    .sort((a, b) => new Date(a.date) - new Date(b.date));\n\n  const getTokenNumber = (appt) => {\n    return confirmedAppointments.findIndex((a) => a._id === appt._id) + 1;\n  };\n\n  // Print individual slip in Thermal Receipt style for confirmed patients\n  const printSlip = (appt) => {\n    if (appt.status !== \"Confirmed\") return;\n\n    const tokenNo = getTokenNumber(appt);\n\n    const printWindow = window.open(\"\", \"_blank\");\n    if (!printWindow) return;\n\n    const content = `\n      <html>\n        <head>\n          <title>Appointment Slip</title>\n          <style>\n            body {\n              font-family: monospace;\n              font-size: 12px;\n              padding: 10px;\n              width: 80mm;\n            }\n            h2 {\n              text-align: center;\n              margin: 5px 0;\n              font-size: 14px;\n            }\n            p { margin: 2px 0; }\n            .divider {\n              border-top: 1px dashed #000;\n              margin: 5px 0;\n            }\n          </style>\n        </head>\n        <body>\n          <h2>MediPOS Token Slip</h2>\n          <div class=\"divider\"></div>\n          <p><strong>Token No:</strong> ${tokenNo}</p>\n          <p><strong>Patient:</strong> ${appt.patient}</p>\n          <p><strong>Doctor:</strong> ${appt.doctor}</p>\n          <p><strong>Time:</strong> ${appt.time}</p>\n          <p><strong>Fee Paid:</strong> ${appt.fee} Rs</p>\n          <div class=\"divider\"></div>\n          <p style=\"text-align:center;\">Thank you for visiting!</p>\n          <script>\n            window.onload = function() { window.print(); }\n          </script>\n        </body>\n      </html>\n    `;\n\n    printWindow.document.write(content);\n    printWindow.document.close();\n  };\n\n  // Print Token List Report in Thermal Receipt style\n  const printTokenList = () => {\n    if (confirmedAppointments.length === 0) {\n      toast.error(\"No confirmed patients for token list\");\n      return;\n    }\n\n    const grossFee = confirmedAppointments.reduce((sum, appt) => sum + Number(appt.fee), 0);\n\n    const printWindow = window.open(\"\", \"_blank\");\n    if (!printWindow) return;\n\n    let content = `\n      <html>\n        <head>\n          <title>Token List Report</title>\n          <style>\n            body { font-family: monospace; font-size: 12px; padding: 10px; width: 80mm; }\n            h2 { text-align: center; margin: 5px 0; font-size: 14px; }\n            .divider { border-top: 1px dashed #000; margin: 5px 0; }\n            p { margin: 2px 0; }\n          </style>\n        </head>\n        <body>\n          <h2>Token List Report</h2>\n          <div class=\"divider\"></div>\n    `;\n\n    confirmedAppointments.forEach((appt, idx) => {\n      content += `\n        <p>Token ${idx + 1}: ${appt.patient}</p>\n        <p>Doctor: ${appt.doctor}</p>\n        <p>Time: ${appt.time}</p>\n        <p>Fee: ${appt.fee} Rs</p>\n        <div class=\"divider\"></div>\n      `;\n    });\n\n    content += `\n      <p><strong>Gross Fee: ${grossFee} Rs</strong></p>\n      <p style=\"text-align:center;\">Thank you!</p>\n      <script>\n        window.onload = function() { window.print(); }\n      </script>\n      </body>\n      </html>\n    `;\n\n    printWindow.document.write(content);\n    printWindow.document.close();\n  };\n\n  return (\n    <div className=\"rounded-2xl shadow-lg bg-white/90 backdrop-blur border border-slate-200 lg:col-span-2 flex flex-col lg:flex-row gap-4\">\n      {/* Left: Date Picker */}\n      <div className=\"w-full lg:w-1/4 p-4 border-r border-slate-200\">\n        <label className=\"block mb-2 font-medium text-slate-700\">Filter by Date:</label>\n        <input\n          type=\"date\"\n          className=\"w-full border border-gray-300 rounded-md p-2 mb-2\"\n          value={selectedDate ? selectedDate.toISOString().split(\"T\")[0] : \"\"}\n          onChange={(e) =>\n            setSelectedDate(e.target.value ? new Date(e.target.value) : null)\n          }\n        />\n        {/* Clear Date Button */}\n        <button\n          onClick={() => setSelectedDate(null)}\n          className=\"w-full bg-blue-600 text-white rounded-md p-2 hover:bg-blue-500\"\n        >\n          Clear Date\n        </button>\n      </div>\n\n      {/* Right: Appointments Content */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Header with Status Filter and Search */}\n        <div className=\"flex flex-col space-y-3 p-6 border-b border-slate-200\">\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-3\">\n            <div className=\"p-3 font-semibold tracking-tight text-xl\">\n              Appointments\n              <span className=\"ml-2 text-sm font-normal text-slate-500\">\n                ({appointments.length})\n              </span>\n            </div>\n\n            <div className=\"px-5 flex gap-2 flex-wrap\">\n              {[\"All\", \"Scheduled\", \"Confirmed\", \"Completed\"].map((status) => (\n                <button\n                  key={status}\n                  onClick={() => setStatusFilter(status)}\n                  className={`inline-flex items-center justify-center h-9 px-4 text-sm rounded-md font-medium ${\n                    statusFilter === status\n                      ? \"bg-teal-600 text-white shadow\"\n                      : \"border border-gray-200 text-gray-600 bg-white hover:bg-slate-100\"\n                  }`}\n                >\n                  {status}\n                </button>\n              ))}\n\n              {/* Token List Print Report only in Confirmed section */}\n              {statusFilter === \"Confirmed\" && confirmedAppointments.length > 0 && (\n                <button\n                  onClick={printTokenList}\n                  className=\"inline-flex items-center justify-center h-9 px-4 text-sm rounded-md font-medium bg-blue-600 text-white shadow\"\n                >\n                  <Printer className=\"w-4 h-4 mr-1\" /> Token List Print Report\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Search Bar */}\n          <div className=\"w-full md:w-1/2\">\n            <input\n              type=\"text\"\n              placeholder=\"Search by patient name...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full rounded-2xl border border-gray-200 p-2\"\n            />\n          </div>\n        </div>\n\n        {/* Appointments List */}\n        <div className=\"p-4\">\n          {loading ? (\n            <div className=\"text-center py-12 text-slate-500\">Loading...</div>\n          ) : filteredAppointments.length === 0 ? (\n            <div className=\"text-center py-12 text-slate-500\">\n              <p className=\"text-lg font-medium\">No appointments</p>\n              <p className=\"text-sm\">No appointments match the selected criteria.</p>\n            </div>\n          ) : (\n            <div className=\"space-y-5 max-h-[500px] overflow-y-auto\">\n              {filteredAppointments.map((appt) => (\n                <div\n                  key={appt._id}\n                  className=\"p-6 bg-white rounded-2xl shadow-lg border border-slate-200 cursor-pointer\"\n                  onClick={() => onEdit?.(appt)}\n                >\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex items-center gap-4\">\n                      <div className=\"-mt-5 h-12 w-12 rounded-xl bg-teal-600 flex items-center justify-center text-white font-bold text-lg\">\n                        {appt.patient?.charAt(0)}\n                      </div>\n\n                      <div>\n                        <p className=\"text-lg font-semibold\">{appt.patient}</p>\n                        <p className=\"text-sm text-slate-600 flex items-center gap-3 mt-1\">\n                          <span className=\"flex items-center gap-1\">\n                            <Stethoscope className=\"w-4 h-4 text-teal-600\" />\n                            {appt.doctor} ({appt.fee} Rs)\n                          </span>\n                          <span className=\"flex items-center gap-1\">\n                            <Clock className=\"w-4 h-4 text-blue-500\" />\n                            {appt.time}\n                          </span>\n                        </p>\n                      </div>\n                    </div>\n\n                    <span\n                      onClick={(e) => e.stopPropagation()}\n                      className={`px-4 py-0.5 text-xs rounded-full shadow ${getBadgeClasses(\n                        appt.status\n                      )}`}\n                    >\n                      {appt.status}\n                    </span>\n                  </div>\n\n                  <div className=\"my-4 border-t border-slate-200\"></div>\n\n                  {/* Action Buttons */}\n                  <div className=\"mt-6 flex items-center gap-2 flex-wrap\">\n                    {appt.status === \"Scheduled\" && (\n                      <button\n                        onClick={() => updateStatus(appt._id, \"Confirmed\")}\n                        className=\"flex-1 border border-green-600 text-green-700 rounded-md text-xs py-1\"\n                      >\n                        <Check className=\"w-4 h-4 inline\" /> Confirm\n                      </button>\n                    )}\n\n                    {(appt.status === \"Scheduled\" || appt.status === \"Confirmed\") && (\n                      <button\n                        onClick={() => updateStatus(appt._id, \"Completed\")}\n                        className=\"flex-1 border border-green-600 text-green-700 rounded-md text-xs py-1\"\n                      >\n                        <Check className=\"w-4 h-4 inline\" /> Complete\n                      </button>\n                    )}\n\n                    {/* Print Slip only for Confirmed */}\n                    {appt.status === \"Confirmed\" && (\n                      <button\n                        onClick={() => printSlip(appt)}\n                        className=\"flex-1 border border-blue-500 text-blue-600 rounded-md text-xs py-1 flex items-center justify-center gap-1\"\n                      >\n                        <Printer className=\"w-4 h-4 inline\" /> Print Token\n                      </button>\n                    )}\n\n                    {/* Delete only for Scheduled */}\n                    {appt.status === \"Scheduled\" && (\n                      <button\n                        onClick={() => deleteAppointment(appt._id)}\n                        className=\"p-1 rounded-md border border-gray-400 text-teal-600 hover:bg-gray-100 text-xs flex items-center gap-1 ml-auto\"\n                      >\n                        <FaTrash className=\"w-4 h-4\" /> Delete\n                      </button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AppointmentList;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 827, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/appointments/AppointmentModel.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { X, CheckCircle, AlertTriangle } from \"lucide-react\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nconst AppointmentModal = ({ onClose, onUpdate, appointment = null }) => {\n  const [patients, setPatients] = useState([]);\n  const [doctors, setDoctors] = useState([]);\n  const [patient, setPatient] = useState(\"\");\n  const [doctor, setDoctor] = useState(\"\");\n  const [date, setDate] = useState(new Date().toISOString().split(\"T\")[0]);\n  const [time, setTime] = useState(\"\");\n  const [fee, setFee] = useState(\"\");\n  const [status, setStatus] = useState(\"Scheduled\");\n  const [reason, setReason] = useState(\"\");  \n  const [loading, setLoading] = useState(false);\n  const [formErrors, setFormErrors] = useState({});\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  // Fetch patients\n  useEffect(() => {\n    const fetchPatients = async () => {\n      try {\n        const res = await apiRequest(\"/patients\");\n        if (res?.success && Array.isArray(res.data)) {\n          setPatients(res.data.map(p => p.name));\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch patients:\", err);\n      }\n    };\n    fetchPatients();\n  }, []);\n\n  // Fetch doctors\n  useEffect(() => {\n    const fetchDoctors = async () => {\n      try {\n        const res = await apiRequest(\"/doctors\");\n        if (res?.success && Array.isArray(res.data)) {\n          // Expecting res.data = [{name: \"Dr. A\", fee: 100}, ...]\n          setDoctors(res.data.map(d => ({ name: d.name, fee: d.fee })));\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch doctors:\", err);\n      }\n    };\n    fetchDoctors();\n  }, []);\n\n  // Initialize form if editing\n  useEffect(() => {\n    if (appointment) {\n      setPatient(appointment.patient || \"\");\n      setDoctor(appointment.doctor || \"\");\n      setDate(appointment.date || new Date().toISOString().split(\"T\")[0]);\n      setTime(appointment.time || \"\");\n      setFee(appointment.fee || \"\");\n      setStatus(appointment.status || \"Scheduled\");\n      setReason(appointment.reason || \"\");      \n    }\n  }, [appointment]);\n\n  // Update fee when doctor changes\n  useEffect(() => {\n    const selectedDoctor = doctors.find(d => d.name === doctor);\n    if (selectedDoctor) {\n      setFee(selectedDoctor.fee);\n    } else {\n      setFee(\"\");\n    }\n  }, [doctor, doctors]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    let errors = {};\n    if (!patient) errors.patient = \"Patient is required.\";\n    if (!doctor) errors.doctor = \"Doctor is required.\";\n    if (!date) errors.date = \"Date is required.\";\n    if (!time) errors.time = \"Time is required.\";\n    if (!fee) errors.fee = \"Fee is required.\";\n    if (!reason) errors.reason = \"Reason is required.\";\n\n    setFormErrors(errors);\n    if (Object.keys(errors).length > 0) return;\n\n    const newAppointment = { patient, doctor, date, time, fee, status, reason };\n\n    try {\n      setLoading(true);\n      if (appointment && onUpdate) {\n        await onUpdate({ ...appointment, ...newAppointment });\n      } else {\n        await apiRequest(\"/appointments/createAppointment\", {\n          method: \"POST\",\n          data: newAppointment,\n        });\n      }\n      setShowSuccess(true);\n      setTimeout(() => {\n        setShowSuccess(false);\n        onClose();\n      }, 1500);\n    } catch (error) {\n      console.error(error);\n      setErrorMessage(error?.response?.data?.message || \"Failed to save appointment.\");\n      setShowError(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      {/* Success / Error Modals */}\n      {showSuccess && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[9999]\">\n          <div className=\"bg-white p-6 rounded-xl shadow-xl text-center animate-fadeIn scale-110\">\n            <CheckCircle className=\"text-green-600 text-5xl mx-auto mb-3\" />\n            <h2 className=\"text-xl font-bold text-green-700\">Success!</h2>\n            <p className=\"text-gray-600 mt-2\">Appointment saved successfully.</p>\n          </div>\n        </div>\n      )}\n      {showError && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[9999]\">\n          <div className=\"bg-white p-6 rounded-xl shadow-xl text-center animate-fadeIn scale-110\">\n            <AlertTriangle className=\"text-red-600 text-5xl mx-auto mb-3\" />\n            <h2 className=\"text-xl font-bold text-red-700\">Error</h2>\n            <p className=\"text-gray-600 mt-2\">{errorMessage}</p>\n            <button\n              onClick={() => setShowError(false)}\n              className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Main Modal */}\n      <div className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[9998] flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"sticky top-0 bg-gradient-to-r from-teal-500 to-teal-600 text-white p-6 rounded-t-2xl flex justify-between items-center\">\n            <h2 className=\"text-2xl font-bold\">{appointment ? \"Edit Appointment\" : \"New Appointment\"}</h2>\n            <button onClick={onClose} className=\"p-2 hover:bg-white/20 rounded-lg transition-colors\">\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          <form className=\"p-6 space-y-6\" onSubmit={handleSubmit}>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {/* Patient */}\n              <div className=\"space-y-1\">\n                <label className=\"text-sm font-medium\">Patient *</label>\n                <select\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\n                  value={patient}\n                  onChange={(e) => setPatient(e.target.value)}\n                >\n                  <option value=\"\">Select patient</option>\n                  {patients.map((p, idx) => (\n                    <option key={idx} value={p}>{p}</option>\n                  ))}\n                </select>\n                {formErrors.patient && <p className=\"text-red-600 text-xs mt-1\">{formErrors.patient}</p>}\n              </div>\n\n              {/* Doctor */}\n              <div className=\"space-y-1\">\n                <label className=\"text-sm font-medium\">Doctor *</label>\n                <select\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\n                  value={doctor}\n                  onChange={(e) => setDoctor(e.target.value)}\n                >\n                  <option value=\"\">Select doctor</option>\n                  {doctors.map((d, idx) => (\n                    <option key={idx} value={d.name}>{d.name}</option>\n                  ))}\n                </select>\n                {formErrors.doctor && <p className=\"text-red-600 text-xs mt-1\">{formErrors.doctor}</p>}\n              </div>\n\n              {/* Date */}\n              <div className=\"space-y-1\">\n                <label className=\"text-sm font-medium\">Date *</label>\n                <input\n                  type=\"date\"\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\n                  value={date}\n                  onChange={(e) => setDate(e.target.value)}\n                />\n                {formErrors.date && <p className=\"text-red-600 text-xs mt-1\">{formErrors.date}</p>}\n              </div>\n\n              {/* Time */}\n              <div className=\"space-y-1\">\n                <label className=\"text-sm font-medium\">Time *</label>\n                <input\n                  type=\"time\"\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\n                  value={time}\n                  onChange={(e) => setTime(e.target.value)}\n                />\n                {formErrors.time && <p className=\"text-red-600 text-xs mt-1\">{formErrors.time}</p>}\n              </div>\n\n              {/* Fee */}\n              <div className=\"space-y-1\">\n                <label className=\"text-sm font-medium\">Consultation Fee *</label>\n                <input\n                  type=\"number\"\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\n                  value={fee}\n                  onChange={(e) => setFee(e.target.value)}\n                  step=\"0.01\"\n                />\n                {formErrors.fee && <p className=\"text-red-600 text-xs mt-1\">{formErrors.fee}</p>}\n              </div>\n\n              {/* Status */}\n              <div className=\"space-y-1\">\n                <label className=\"text-sm font-medium\">Status *</label>\n                <select\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\n                  value={status}\n                  onChange={(e) => setStatus(e.target.value)}\n                >\n                  <option value=\"Scheduled\">Scheduled</option>\n                  <option value=\"Confirmed\">Confirmed</option>\n                  <option value=\"Completed\">Completed</option>\n                  <option value=\"Cancelled\">Cancelled</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Reason */}\n            <div className=\"space-y-1\">\n              <label className=\"text-sm font-medium\">Reason for Visit *</label>\n              <textarea\n                className=\"flex min-h-[60px] w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\n                placeholder=\"Enter reason for visit\"\n                value={reason}\n                onChange={(e) => setReason(e.target.value)}\n                rows={3}\n              />\n              {formErrors.reason && <p className=\"text-red-600 text-xs mt-1\">{formErrors.reason}</p>}\n            </div>\n\n            {/* Buttons */}\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium h-9 px-4 py-2 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium h-9 px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow hover:from-teal-600 hover:to-teal-700 disabled:opacity-50\"\n              >\n                {loading ? (appointment ? \"Updating...\" : \"Creating...\") : appointment ? \"Update Appointment\" : \"Create Appointment\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      <style jsx>{`\n        @keyframes fadeIn {\n          from { opacity: 0; transform: scale(0.9); }\n          to { opacity: 1; transform: scale(1); }\n        }\n        .animate-fadeIn { animation: fadeIn 0.3s ease-out; }\n      `}</style>\n    </>\n  );\n};\n\nexport default AppointmentModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1474, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/appointments/AppointmentUpdateModel.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { X, CheckCircle, AlertTriangle } from \"lucide-react\";\r\nimport { apiRequest } from \"@/app/authservice/api\";\r\n\r\nconst AppointmentUpdateModal = ({ onClose, appointment = null }) => {\r\n  const [patients, setPatients] = useState([]);\r\n  const [doctors, setDoctors] = useState([]);\r\n  const [patient, setPatient] = useState(\"\");\r\n  const [doctor, setDoctor] = useState(\"\");\r\n  const [date, setDate] = useState(new Date().toISOString().split(\"T\")[0]);\r\n  const [time, setTime] = useState(\"\");\r\n  const [fee, setFee] = useState(\"\");\r\n  const [status, setStatus] = useState(\"Scheduled\");\r\n  const [reason, setReason] = useState(\"\");  \r\n  const [loading, setLoading] = useState(false);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n  const [showError, setShowError] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  // Fetch patients\r\n  useEffect(() => {\r\n    const fetchPatients = async () => {\r\n      try {\r\n        const res = await apiRequest(\"/patients\");\r\n        if (res?.success && Array.isArray(res.data)) {\r\n          setPatients(res.data.map(p => p.name));\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch patients:\", err);\r\n      }\r\n    };\r\n    fetchPatients();\r\n  }, []);\r\n\r\n  // Fetch doctors\r\n  useEffect(() => {\r\n    const fetchDoctors = async () => {\r\n      try {\r\n        const res = await apiRequest(\"/doctors\");\r\n        if (res?.success && Array.isArray(res.data)) {\r\n          setDoctors(res.data.map(d => ({ name: d.name, fee: d.fee })));\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch doctors:\", err);\r\n      }\r\n    };\r\n    fetchDoctors();\r\n  }, []);\r\n\r\n  // Initialize form if editing\r\n  useEffect(() => {\r\n    if (appointment) {\r\n      setPatient(appointment.patient || \"\");\r\n      setDoctor(appointment.doctor || \"\");\r\n      setDate(appointment.date || new Date().toISOString().split(\"T\")[0]);\r\n      setTime(appointment.time || \"\");\r\n      setFee(appointment.fee || \"\");\r\n      setStatus(appointment.status || \"Scheduled\");\r\n      setReason(appointment.reason || \"\");      \r\n    }\r\n  }, [appointment]);\r\n\r\n  // Update fee when doctor changes\r\n  useEffect(() => {\r\n    const selectedDoctor = doctors.find(d => d.name === doctor);\r\n    if (selectedDoctor) {\r\n      setFee(selectedDoctor.fee);\r\n    } else {\r\n      setFee(\"\");\r\n    }\r\n  }, [doctor, doctors]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    let errors = {};\r\n    if (!patient) errors.patient = \"Patient is required.\";\r\n    if (!doctor) errors.doctor = \"Doctor is required.\";\r\n    if (!date) errors.date = \"Date is required.\";\r\n    if (!time) errors.time = \"Time is required.\";\r\n    if (!fee) errors.fee = \"Fee is required.\";\r\n    if (!reason) errors.reason = \"Reason is required.\";\r\n\r\n    setFormErrors(errors);\r\n    if (Object.keys(errors).length > 0) return;\r\n\r\n    const updatedAppointment = { patient, doctor, date, time, fee, status, reason };\r\n\r\n    try {\r\n      setLoading(true);\r\n      if (appointment?._id) {\r\n        await apiRequest(`/appointments/updateAppointment/${appointment._id}`, {\r\n          method: \"PUT\",\r\n          data: updatedAppointment,\r\n        });\r\n      } else {\r\n        await apiRequest(\"/appointments/createAppointment\", {\r\n          method: \"POST\",\r\n          data: updatedAppointment,\r\n        });\r\n      }\r\n      setShowSuccess(true);\r\n      setTimeout(() => {\r\n        setShowSuccess(false);\r\n        onClose();\r\n      }, 1500);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setErrorMessage(error?.response?.data?.message || \"Failed to save appointment.\");\r\n      setShowError(true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Success / Error Modals */}\r\n      {showSuccess && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[9999]\">\r\n          <div className=\"bg-white p-6 rounded-xl shadow-xl text-center animate-fadeIn scale-110\">\r\n            <CheckCircle className=\"text-green-600 text-5xl mx-auto mb-3\" />\r\n            <h2 className=\"text-xl font-bold text-green-700\">Success!</h2>\r\n            <p className=\"text-gray-600 mt-2\">Appointment saved successfully.</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {showError && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[9999]\">\r\n          <div className=\"bg-white p-6 rounded-xl shadow-xl text-center animate-fadeIn scale-110\">\r\n            <AlertTriangle className=\"text-red-600 text-5xl mx-auto mb-3\" />\r\n            <h2 className=\"text-xl font-bold text-red-700\">Error</h2>\r\n            <p className=\"text-gray-600 mt-2\">{errorMessage}</p>\r\n            <button\r\n              onClick={() => setShowError(false)}\r\n              className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Modal */}\r\n      <div className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[9998] flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n          <div className=\"sticky top-0 bg-gradient-to-r from-teal-500 to-teal-600 text-white p-6 rounded-t-2xl flex justify-between items-center\">\r\n            <h2 className=\"text-2xl font-bold\">{appointment ? \"Edit Appointment\" : \"New Appointment\"}</h2>\r\n            <button onClick={onClose} className=\"p-2 hover:bg-white/20 rounded-lg transition-colors\">\r\n              <X className=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n\r\n          <form className=\"p-6 space-y-6\" onSubmit={handleSubmit}>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Patient */}\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\">Patient *</label>\r\n                <select\r\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\r\n                  value={patient}\r\n                  onChange={(e) => setPatient(e.target.value)}\r\n                >\r\n                  <option value=\"\">Select patient</option>\r\n                  {patients.map((p, idx) => (\r\n                    <option key={idx} value={p}>{p}</option>\r\n                  ))}\r\n                </select>\r\n                {formErrors.patient && <p className=\"text-red-600 text-xs mt-1\">{formErrors.patient}</p>}\r\n              </div>\r\n\r\n              {/* Doctor */}\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\">Doctor *</label>\r\n                <select\r\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\r\n                  value={doctor}\r\n                  onChange={(e) => setDoctor(e.target.value)}\r\n                >\r\n                  <option value=\"\">Select doctor</option>\r\n                  {doctors.map((d, idx) => (\r\n                    <option key={idx} value={d.name}>{d.name}</option>\r\n                  ))}\r\n                </select>\r\n                {formErrors.doctor && <p className=\"text-red-600 text-xs mt-1\">{formErrors.doctor}</p>}\r\n              </div>\r\n\r\n              {/* Date */}\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\">Date *</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\r\n                  value={date}\r\n                  onChange={(e) => setDate(e.target.value)}\r\n                />\r\n                {formErrors.date && <p className=\"text-red-600 text-xs mt-1\">{formErrors.date}</p>}\r\n              </div>\r\n\r\n              {/* Time */}\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\">Time *</label>\r\n                <input\r\n                  type=\"time\"\r\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\r\n                  value={time}\r\n                  onChange={(e) => setTime(e.target.value)}\r\n                />\r\n                {formErrors.time && <p className=\"text-red-600 text-xs mt-1\">{formErrors.time}</p>}\r\n              </div>\r\n\r\n              {/* Fee */}\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\">Consultation Fee *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\r\n                  value={fee}\r\n                  onChange={(e) => setFee(e.target.value)}\r\n                  step=\"0.01\"\r\n                />\r\n                {formErrors.fee && <p className=\"text-red-600 text-xs mt-1\">{formErrors.fee}</p>}\r\n              </div>\r\n\r\n              {/* Status */}\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\">Status *</label>\r\n                <select\r\n                  className=\"flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\r\n                  value={status}\r\n                  onChange={(e) => setStatus(e.target.value)}\r\n                >\r\n                  <option value=\"Scheduled\">Scheduled</option>\r\n                  <option value=\"Confirmed\">Confirmed</option>\r\n                  <option value=\"Completed\">Completed</option>\r\n                  <option value=\"Cancelled\">Cancelled</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Reason */}\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\">Reason for Visit *</label>\r\n              <textarea\r\n                className=\"flex min-h-[60px] w-full rounded-md border border-gray-200 bg-transparent px-3 text-base shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\"\r\n                placeholder=\"Enter reason for visit\"\r\n                value={reason}\r\n                onChange={(e) => setReason(e.target.value)}\r\n                rows={3}\r\n              />\r\n              {formErrors.reason && <p className=\"text-red-600 text-xs mt-1\">{formErrors.reason}</p>}\r\n            </div>\r\n\r\n            {/* Buttons */}\r\n            <div className=\"flex justify-end gap-3 pt-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={onClose}\r\n                className=\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium h-9 px-4 py-2 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium h-9 px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow hover:from-teal-600 hover:to-teal-700 disabled:opacity-50\"\r\n              >\r\n                {loading ? (appointment ? \"Updating...\" : \"Creating...\") : appointment ? \"Update Appointment\" : \"Create Appointment\"}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; transform: scale(0.9); }\r\n          to { opacity: 1; transform: scale(1); }\r\n        }\r\n        .animate-fadeIn { animation: fadeIn 0.3s ease-out; }\r\n      `}</style>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AppointmentUpdateModal;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2120, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/pages/AppointmentsPage.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nimport Header from \"../../components/appointments/Header\";\nimport AppointmentList from \"../../components/appointments/AppointmentList\";\nimport AppointmentModal from \"../../components/appointments/AppointmentModel\";\nimport AppointmentUpdateModal from \"../../components/appointments/AppointmentUpdateModel\"; // fixed typo\n\nconst AppointmentsPage = () => {\n  const [appointments, setAppointments] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingAppointment, setEditingAppointment] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  /* ---------------- FETCH ALL APPOINTMENTS ---------------- */\n  const fetchAppointments = async () => {\n    try {\n      setLoading(true);\n      const res = await apiRequest(\"/appointments\", { method: \"GET\" });\n\n      console.log(\"Fetched appointments:\", res);\n\n      const data = res?.data?.data || res?.data || [];\n      setAppointments(data);\n    } catch (error) {\n      console.error(\"Failed to fetch appointments:\", error);\n      setAppointments([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAppointments();\n  }, []);\n\n  /* ---------------- CREATE APPOINTMENT ---------------- */\n  const handleCreate = async (newAppointment) => {\n    try {\n      const res = await apiRequest(\"/appointments/createAppointment\", {\n        method: \"POST\",\n        data: newAppointment, // use data for apiRequest\n      });\n\n      const created = res?.data || res;\n      setAppointments((prev) => [...prev, created]);\n      setIsModalOpen(false);\n    } catch (error) {\n      console.error(\"Failed to create appointment:\", error);\n    }\n  };\n\n  /* ---------------- UPDATE APPOINTMENT ---------------- */\n  const handleUpdate = async (updatedAppointment) => {\n    try {\n      const res = await apiRequest(`/appointments/updateAppointment/${updatedAppointment._id}`, {\n        method: \"PUT\",\n        data: updatedAppointment, // use data\n      });\n\n      const updated = res?.data || res;\n      setAppointments((prev) =>\n        prev.map((appt) => (appt._id === updated._id ? updated : appt))\n      );\n      setIsModalOpen(false);\n    } catch (error) {\n      console.error(\"Failed to update appointment:\", error);\n    }\n  };\n\n  return (\n    <main className=\"flex flex-col gap-4 p-4\">\n      <div className=\"space-y-6 w-full\">\n        {/* Header */}\n        <Header\n          title=\"Appointments\"\n          description=\"Manage patient appointments and schedules\"\n          onNew={() => {\n            setEditingAppointment(null);\n            setIsModalOpen(true);\n          }}\n        />\n\n        {/* Appointment List */}\n        <AppointmentList\n          loading={loading}\n          date=\"All Appointments\"\n          appointments={appointments}\n          onEdit={(appt) => {\n            setEditingAppointment(appt);\n            setIsModalOpen(true);\n          }}\n        />\n      </div>\n\n      {/* Modal */}\n      {isModalOpen && (\n        <>\n          {!editingAppointment ? (\n            <AppointmentModal\n              onClose={() => setIsModalOpen(false)}\n              onCreate={handleCreate}\n            />\n          ) : (\n            <AppointmentUpdateModal\n              onClose={() => setIsModalOpen(false)}\n              onUpdate={handleUpdate}\n              appointment={editingAppointment}\n            />\n          )}\n        </>\n      )}\n    </main>\n  );\n};\n\nexport default AppointmentsPage;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AACA,uRAA2F,aAAa;AARxG;;;;;;;;AAUA,MAAM,mBAAmB;IACvB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,4DAA4D,GAC5D,MAAM,oBAAoB;QACxB,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,iBAAiB;gBAAE,QAAQ;YAAM;YAE9D,QAAQ,GAAG,CAAC,yBAAyB;YAErC,MAAM,OAAO,KAAK,MAAM,QAAQ,KAAK,QAAQ,EAAE;YAC/C,gBAAgB;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,gBAAgB,EAAE;QACpB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,wDAAwD,GACxD,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,mCAAmC;gBAC9D,QAAQ;gBACR,MAAM;YACR;YAEA,MAAM,UAAU,KAAK,QAAQ;YAC7B,gBAAgB,CAAC,OAAS;uBAAI;oBAAM;iBAAQ;YAC5C,eAAe;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD;IACF;IAEA,wDAAwD,GACxD,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,CAAC,gCAAgC,EAAE,mBAAmB,GAAG,EAAE,EAAE;gBACxF,QAAQ;gBACR,MAAM;YACR;YAEA,MAAM,UAAU,KAAK,QAAQ;YAC7B,gBAAgB,CAAC,OACf,KAAK,GAAG,CAAC,CAAC,OAAU,KAAK,GAAG,KAAK,QAAQ,GAAG,GAAG,UAAU;YAE3D,eAAe;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,uJAAM;wBACL,OAAM;wBACN,aAAY;wBACZ,OAAO;4BACL,sBAAsB;4BACtB,eAAe;wBACjB;;;;;;kCAIF,8OAAC,gKAAe;wBACd,SAAS;wBACT,MAAK;wBACL,cAAc;wBACd,QAAQ,CAAC;4BACP,sBAAsB;4BACtB,eAAe;wBACjB;;;;;;;;;;;;YAKH,6BACC;0BACG,CAAC,mCACA,8OAAC,iKAAgB;oBACf,SAAS,IAAM,eAAe;oBAC9B,UAAU;;;;;6EAGZ,8OAAC,uKAAsB;oBACrB,SAAS,IAAM,eAAe;oBAC9B,UAAU;oBACV,aAAa;;;;;;;;;;;;;AAO3B;uCAEe"}},
    {"offset": {"line": 2259, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/appointments/page.jsx"],"sourcesContent":["\"use client\";\n\nimport AppointmentsPage from \"../components/pages/AppointmentsPage\";\n\nexport default function Appointments() {\n  return (\n    <AppointmentsPage />    \n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBACE,8OAAC,0JAAgB;;;;;AAErB"}}]
}