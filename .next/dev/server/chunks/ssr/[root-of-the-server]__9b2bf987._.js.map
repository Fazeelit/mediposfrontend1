{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/authservice/api.jsx"],"sourcesContent":["// app/authservice/page.jsx\n\"use client\";\n\nimport axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\n\nconst BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ||\n  \"https://mediposbackend.onrender.com/api\";\n\n/**\n * Generic API request function\n */\nexport async function apiRequest(\n  endpoint,\n  {\n    method = \"GET\",\n    data = null,\n    headers = {},\n    includeAuth = false,\n    formData = false,\n    successMessage = null,\n    timeout = 30 * 60 * 1000, // 30 minutes\n    params = null,\n    onUploadProgress = null,\n  } = {}\n) {\n  try {\n    let finalHeaders = { ...headers };\n\n    // ---------------------------------------------------------\n    // Handle Content-Type logic\n    // ---------------------------------------------------------\n    if (formData) {\n      // VERY IMPORTANT: Do NOT set Content-Type here\n      // Browser will generate correct boundary\n      delete finalHeaders[\"Content-Type\"];\n    } else if (data && typeof data === \"object\") {\n      finalHeaders[\"Content-Type\"] = \"application/json\";\n      data = JSON.stringify(data);\n    }\n\n    // ---------------------------------------------------------\n    // Authorization Header\n    // ---------------------------------------------------------\n    if (includeAuth && typeof window !== \"undefined\") {\n      const token = localStorage.getItem(\"authToken\");\n      if (token) finalHeaders[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    // ---------------------------------------------------------\n    // Create Request URL\n    // ---------------------------------------------------------\n    const url = `${BASE_URL}${endpoint.startsWith(\"/\") ? endpoint : \"/\" + endpoint}`;\n\n    console.log(\"API Request:\", {\n      url,\n      method,\n      sendingFormData: formData,\n      headers: finalHeaders,\n      params,\n      data,\n    });\n\n    // ---------------------------------------------------------\n    // Axios Config\n    // ---------------------------------------------------------\n    const config = {\n      url,\n      method: method.toUpperCase(),\n      headers: finalHeaders,\n      timeout,\n      maxBodyLength: Infinity,\n      maxContentLength: Infinity,\n    };\n\n    if (params) config.params = params;\n\n    if (typeof onUploadProgress === \"function\") {\n      config.onUploadProgress = onUploadProgress;\n    }\n\n    // Attach body only for non-GET/HEAD\n    if (![\"GET\", \"HEAD\"].includes(config.method)) {\n      config.data = data;\n    }\n\n    // ---------------------------------------------------------\n    // Make Request\n    // ---------------------------------------------------------\n    const response = await axios(config);\n\n    // ---------------------------------------------------------\n    // Success Toast\n    // ---------------------------------------------------------\n    const msg = successMessage || response.data?.message;\n    if (msg && typeof window !== \"undefined\") {\n      toast.success(msg);\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(\"API Request Error:\", error);\n\n    const errorMessage =\n      error.response?.data?.message ||\n      error.response?.data?.error ||\n      (error.code === \"ECONNABORTED\"\n        ? \"Request timed out. Please try again.\"\n        : null) ||\n      (error.message?.includes(\"Network Error\")\n        ? \"Network error â€” check your internet connection.\"\n        : null) ||\n      error.message ||\n      \"Something went wrong\";\n\n    if (typeof window !== \"undefined\") toast.error(errorMessage);\n\n    throw new Error(errorMessage);\n  }\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAG3B;AACA;AAHA;;;AAKA,MAAM,WACJ,QAAQ,GAAG,CAAC,wBAAwB,IACpC;AAKK,eAAe,WACpB,QAAQ,EACR,EACE,SAAS,KAAK,EACd,OAAO,IAAI,EACX,UAAU,CAAC,CAAC,EACZ,cAAc,KAAK,EACnB,WAAW,KAAK,EAChB,iBAAiB,IAAI,EACrB,UAAU,KAAK,KAAK,IAAI,EACxB,SAAS,IAAI,EACb,mBAAmB,IAAI,EACxB,GAAG,CAAC,CAAC;IAEN,IAAI;QACF,IAAI,eAAe;YAAE,GAAG,OAAO;QAAC;QAEhC,4DAA4D;QAC5D,4BAA4B;QAC5B,4DAA4D;QAC5D,IAAI,UAAU;YACZ,+CAA+C;YAC/C,yCAAyC;YACzC,OAAO,YAAY,CAAC,eAAe;QACrC,OAAO,IAAI,QAAQ,OAAO,SAAS,UAAU;YAC3C,YAAY,CAAC,eAAe,GAAG;YAC/B,OAAO,KAAK,SAAS,CAAC;QACxB;QAEA,4DAA4D;QAC5D,uBAAuB;QACvB,4DAA4D;QAC5D;;QAKA,4DAA4D;QAC5D,qBAAqB;QACrB,4DAA4D;QAC5D,MAAM,MAAM,GAAG,WAAW,SAAS,UAAU,CAAC,OAAO,WAAW,MAAM,UAAU;QAEhF,QAAQ,GAAG,CAAC,gBAAgB;YAC1B;YACA;YACA,iBAAiB;YACjB,SAAS;YACT;YACA;QACF;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,SAAS;YACb;YACA,QAAQ,OAAO,WAAW;YAC1B,SAAS;YACT;YACA,eAAe;YACf,kBAAkB;QACpB;QAEA,IAAI,QAAQ,OAAO,MAAM,GAAG;QAE5B,IAAI,OAAO,qBAAqB,YAAY;YAC1C,OAAO,gBAAgB,GAAG;QAC5B;QAEA,oCAAoC;QACpC,IAAI,CAAC;YAAC;YAAO;SAAO,CAAC,QAAQ,CAAC,OAAO,MAAM,GAAG;YAC5C,OAAO,IAAI,GAAG;QAChB;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,WAAW,MAAM,IAAA,gJAAK,EAAC;QAE7B,4DAA4D;QAC5D,gBAAgB;QAChB,4DAA4D;QAC5D,MAAM,MAAM,kBAAkB,SAAS,IAAI,EAAE;QAC7C;;QAIA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,MAAM,eACJ,MAAM,QAAQ,EAAE,MAAM,WACtB,MAAM,QAAQ,EAAE,MAAM,SACtB,CAAC,MAAM,IAAI,KAAK,iBACZ,yCACA,IAAI,KACR,CAAC,MAAM,OAAO,EAAE,SAAS,mBACrB,oDACA,IAAI,KACR,MAAM,OAAO,IACb;QAEF;;QAEA,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/appointments/Header.jsx"],"sourcesContent":["import React from \"react\";\nimport { Plus } from \"lucide-react\";\n\nconst Header = ({ title, description, onNew }) => (\n  <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n    <div>\n      <h1 className=\"text-2xl font-bold text-slate-900\">{title}</h1>\n      <p className=\"text-slate-600 mt-1\">{description}</p>\n    </div>\n    <button\n      onClick={onNew}\n      className=\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium\n                 transition-colors h-9 px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-600\n                 hover:from-teal-600 hover:to-teal-700 shadow-lg text-white\"\n    >\n      <Plus className=\"w-5 h-5\" />\n      New Appointment\n    </button>\n  </div>\n);\n\nexport default Header;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,MAAM,SAAS,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,iBAC3C,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,8OAAC;wBAAE,WAAU;kCAAuB;;;;;;;;;;;;0BAEtC,8OAAC;gBACC,SAAS;gBACT,WAAU;;kCAIV,8OAAC,0MAAI;wBAAC,WAAU;;;;;;oBAAY;;;;;;;;;;;;;uCAMnB"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/appointments/AppointmentList.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { FaTrash } from \"react-icons/fa\";\nimport { Clock, Stethoscope, Check, Printer } from \"lucide-react\";\nimport { apiRequest } from \"@/app/authservice/api\";\nimport { toast } from \"react-hot-toast\";\n\nconst AppointmentList = ({ onEdit }) => {\n  const [appointments, setAppointments] = useState([]);\n  const [statusFilter, setStatusFilter] = useState(\"All\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch appointments from API\n  const fetchAppointments = async () => {\n    try {\n      setLoading(true);\n      const res = await apiRequest(\"/appointments\");\n      if (res?.success && Array.isArray(res.data)) {\n        setAppointments(res.data);\n      } else {\n        setAppointments([]);\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch appointments:\", err);\n      toast.error(\"Failed to fetch appointments\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAppointments();\n  }, []);\n\n  // Filter appointments based on status, search, and selected date\n  const filteredAppointments = appointments.filter((appt) => {\n    const matchesStatus = statusFilter === \"All\" || appt.status === statusFilter;\n    const matchesSearch = appt.patient.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesDate = selectedDate\n      ? new Date(appt.date).toDateString() === selectedDate.toDateString()\n      : true;\n    return matchesStatus && matchesSearch && matchesDate;\n  });\n\n  // Update appointment status locally\n  const updateStatus = (id, newStatus) => {\n    setAppointments((prev) =>\n      prev.map((appt) =>\n        appt._id === id ? { ...appt, status: newStatus } : appt\n      )\n    );\n  };\n\n  // Delete appointment\n  const deleteAppointment = async (id) => {\n    try {\n      await apiRequest(`/appointments/deleteAppointment/${id}`, {\n        method: \"DELETE\",\n      });\n      setAppointments((prev) => prev.filter((appt) => appt._id !== id));\n      toast.success(\"Appointment deleted successfully\");\n    } catch (error) {\n      console.error(\"Failed to delete appointment:\", error);\n      toast.error(\n        error?.response?.data?.message || \"Failed to delete appointment\"\n      );\n    }\n  };\n\n  const getBadgeClasses = (status) => {\n    switch (status) {\n      case \"Scheduled\":\n        return \"bg-purple-100 text-purple-800 border border-purple-200\";\n      case \"Confirmed\":\n        return \"bg-teal-100 text-teal-800 border border-teal-200\";\n      case \"Completed\":\n        return \"bg-green-100 text-green-800 border border-green-200\";\n      case \"Cancelled\":\n        return \"bg-red-100 text-red-800 border border-red-200\";\n      default:\n        return \"bg-teal-100 text-teal-800 border border-teal-200\";\n    }\n  };\n\n  // Get token numbers only for confirmed patients\n  const confirmedAppointments = appointments\n    .filter((a) => a.status === \"Confirmed\")\n    .sort((a, b) => new Date(a.date) - new Date(b.date)); // sort by date/time if needed\n\n  const getTokenNumber = (appt) => {\n    return confirmedAppointments.findIndex((a) => a._id === appt._id) + 1;\n  };\n\n  // Print individual slip\n  const printSlip = (appt) => {\n    const tokenNo = getTokenNumber(appt);\n    const slip = `\n      Token No: ${tokenNo}\n      Patient Name: ${appt.patient}\n      Doctor Name: ${appt.doctor}\n      Time: ${appt.time}\n      Fee Paid: ${appt.fee} Rs\n    `;\n    console.log(\"Print Slip:\\n\", slip);\n    alert(`Printing Slip:\\n\\n${slip}`);\n  };\n\n  // Print Token List Report (Thermal Printer Ready) with Gross Fee\n  const printTokenList = () => {\n    if (confirmedAppointments.length === 0) {\n      toast.error(\"No confirmed patients for token list\");\n      return;\n    }\n\n    // Calculate gross fee\n    const grossFee = confirmedAppointments.reduce((sum, appt) => sum + Number(appt.fee), 0);\n\n    const printWindow = window.open(\"\", \"_blank\");\n    if (!printWindow) return;\n\n    let content = `\n      <html>\n        <head>\n          <title>Token List Report</title>\n          <style>\n            body { font-family: monospace; font-size: 12px; margin: 0; padding: 5px; }\n            h2 { text-align: center; margin-bottom: 10px; font-size: 14px; }\n            table { width: 100%; border-collapse: collapse; }\n            th, td { padding: 4px 2px; text-align: left; }\n            th { border-bottom: 1px dashed #000; }\n            tr { border-bottom: 1px dotted #aaa; }\n            tfoot td { font-weight: bold; border-top: 1px dashed #000; }\n          </style>\n        </head>\n        <body>\n          <h2>Token List Report</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Token</th>\n                <th>Patient</th>\n                <th>Doctor</th>\n                <th>Time</th>\n                <th>Fee</th>\n              </tr>\n            </thead>\n            <tbody>\n    `;\n\n    confirmedAppointments.forEach((appt, idx) => {\n      content += `\n        <tr>\n          <td>${idx + 1}</td>\n          <td>${appt.patient}</td>\n          <td>${appt.doctor}</td>\n          <td>${appt.time}</td>\n          <td>${appt.fee} Rs</td>\n        </tr>\n      `;\n    });\n\n    content += `\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"4\">Gross Fee</td>\n                <td>${grossFee} Rs</td>\n              </tr>\n            </tfoot>\n          </table>\n          <script>\n            window.onload = function() { window.print(); }\n          </script>\n        </body>\n      </html>\n    `;\n\n    printWindow.document.write(content);\n    printWindow.document.close();\n  };\n\n  return (\n    <div className=\"rounded-2xl shadow-lg bg-white/90 backdrop-blur border border-slate-200 lg:col-span-2 flex flex-col lg:flex-row gap-4\">\n      {/* Left: Date Picker */}\n      <div className=\"w-full lg:w-1/4 p-4 border-r border-slate-200\">\n        <label className=\"block mb-2 font-medium text-slate-700\">Filter by Date:</label>\n        <input\n          type=\"date\"\n          className=\"w-full border border-gray-300 rounded-md p-2 mb-4\"\n          value={selectedDate ? selectedDate.toISOString().split(\"T\")[0] : \"\"}\n          onChange={(e) =>\n            setSelectedDate(e.target.value ? new Date(e.target.value) : null)\n          }\n        />\n      </div>\n\n      {/* Right: Appointments Content */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Header with Status Filter and Search */}\n        <div className=\"flex flex-col space-y-3 p-6 border-b border-slate-200\">\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-3\">\n            <div className=\"p-3 font-semibold tracking-tight text-xl\">\n              Appointments\n              <span className=\"ml-2 text-sm font-normal text-slate-500\">\n                ({appointments.length})\n              </span>\n            </div>\n\n            <div className=\"px-5 flex gap-2 flex-wrap\">\n              {[\"All\", \"Scheduled\", \"Confirmed\", \"Completed\"].map((status) => (\n                <button\n                  key={status}\n                  onClick={() => setStatusFilter(status)}\n                  className={`inline-flex items-center justify-center h-9 px-4 text-sm rounded-md font-medium ${\n                    statusFilter === status\n                      ? \"bg-teal-600 text-white shadow\"\n                      : \"border border-gray-200 text-gray-600 bg-white hover:bg-slate-100\"\n                  }`}\n                >\n                  {status}\n                </button>\n              ))}\n\n              {/* Token List Print Report only in Confirmed section */}\n              {statusFilter === \"Confirmed\" && confirmedAppointments.length > 0 && (\n                <button\n                  onClick={printTokenList}\n                  className=\"inline-flex items-center justify-center h-9 px-4 text-sm rounded-md font-medium bg-blue-600 text-white shadow\"\n                >\n                  <Printer className=\"w-4 h-4 mr-1\" /> Token List Print Report\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Search Bar */}\n          <div className=\"w-full md:w-1/2\">\n            <input\n              type=\"text\"\n              placeholder=\"Search by patient name...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full rounded-2xl border border-gray-200 p-2\"\n            />\n          </div>\n        </div>\n\n        {/* Appointments List */}\n        <div className=\"p-4\">\n          {loading ? (\n            <div className=\"text-center py-12 text-slate-500\">Loading...</div>\n          ) : filteredAppointments.length === 0 ? (\n            <div className=\"text-center py-12 text-slate-500\">\n              <p className=\"text-lg font-medium\">No appointments</p>\n              <p className=\"text-sm\">No appointments match the selected criteria.</p>\n            </div>\n          ) : (\n            <div className=\"space-y-5 max-h-[500px] overflow-y-auto\">\n              {filteredAppointments.map((appt) => (\n                <div\n                  key={appt._id}\n                  className=\"p-6 bg-white rounded-2xl shadow-lg border border-slate-200 cursor-pointer\"\n                  onClick={() => onEdit?.(appt)}\n                >\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex items-center gap-4\">\n                      <div className=\"-mt-5 h-12 w-12 rounded-xl bg-teal-600 flex items-center justify-center text-white font-bold text-lg\">\n                        {appt.patient?.charAt(0)}\n                      </div>\n\n                      <div>\n                        <p className=\"text-lg font-semibold\">{appt.patient}</p>\n                        <p className=\"text-sm text-slate-600 flex items-center gap-3 mt-1\">\n                          <span className=\"flex items-center gap-1\">\n                            <Stethoscope className=\"w-4 h-4 text-teal-600\" />\n                            {appt.doctor} ({appt.fee} Rs)\n                          </span>\n                          <span className=\"flex items-center gap-1\">\n                            <Clock className=\"w-4 h-4 text-blue-500\" />\n                            {appt.time}\n                          </span>\n                        </p>\n                      </div>\n                    </div>\n\n                    <span\n                      onClick={(e) => e.stopPropagation()}\n                      className={`px-4 py-0.5 text-xs rounded-full shadow ${getBadgeClasses(\n                        appt.status\n                      )}`}\n                    >\n                      {appt.status}\n                    </span>\n                  </div>\n\n                  <div className=\"my-4 border-t border-slate-200\"></div>\n\n                  {/* Action Buttons */}\n                  <div className=\"mt-6 flex items-center gap-2 flex-wrap\">\n                    {appt.status === \"Scheduled\" && (\n                      <button\n                        onClick={() => updateStatus(appt._id, \"Confirmed\")}\n                        className=\"flex-1 border border-green-600 text-green-700 rounded-md text-xs py-1\"\n                      >\n                        <Check className=\"w-4 h-4 inline\" /> Confirm\n                      </button>\n                    )}\n\n                    {(appt.status === \"Scheduled\" || appt.status === \"Confirmed\") && (\n                      <button\n                        onClick={() => updateStatus(appt._id, \"Completed\")}\n                        className=\"flex-1 border border-green-600 text-green-700 rounded-md text-xs py-1\"\n                      >\n                        <Check className=\"w-4 h-4 inline\" /> Complete\n                      </button>\n                    )}\n\n                    {/* Print Slip only for Confirmed */}\n                    {appt.status === \"Confirmed\" && (\n                      <button\n                        onClick={() => printSlip(appt)}\n                        className=\"flex-1 border border-blue-500 text-blue-600 rounded-md text-xs py-1 flex items-center justify-center gap-1\"\n                      >\n                        <Printer className=\"w-4 h-4 inline\" /> Print Slip\n                      </button>\n                    )}\n\n                    {/* Delete only for Scheduled */}\n                    {appt.status === \"Scheduled\" && (\n                      <button\n                        onClick={() => deleteAppointment(appt._id)}\n                        className=\"p-1 rounded-md border border-gray-400 text-teal-600 hover:bg-gray-100 text-xs flex items-center gap-1 ml-auto\"\n                      >\n                        <FaTrash className=\"w-4 h-4\" /> Delete\n                      </button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AppointmentList;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/pages/AppointmentsPage.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nimport Header from \"../../components/appointments/Header\";\nimport AppointmentList from \"../../components/appointments/AppointmentList\";\n\n\n\nconst AppointmentsPage = () => {\n  const [appointments, setAppointments] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingAppointment, setEditingAppointment] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  /* ---------------- FETCH ALL APPOINTMENTS ---------------- */\n  const fetchAppointments = async () => {\n    try {\n      setLoading(true);\n      const res = await apiRequest(\"/appointments\", { method: \"GET\" });\n\n      console.log(\"Fetched appointments:\", res); // ðŸ” Debug API response\n\n      // Adjust depending on how apiRequest returns data\n      const data = res?.data?.data || res?.data || [];\n      setAppointments(data);\n    } catch (error) {\n      console.error(\"Failed to fetch appointments:\", error);\n      setAppointments([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAppointments();\n  }, []);\n\n  /* ---------------- CREATE APPOINTMENT ---------------- */\n  const handleCreate = async (newAppointment) => {\n    try {\n      const res = await apiRequest(\"/appointments\", {\n        method: \"POST\",\n        body: newAppointment,\n      });\n\n      const created = res?.data || res;\n      setAppointments((prev) => [...prev, created]);\n      setIsModalOpen(false);\n    } catch (error) {\n      console.error(\"Failed to create appointment:\", error);\n    }\n  };\n\n  /* ---------------- UPDATE APPOINTMENT ---------------- */\n  const handleUpdate = async (updatedAppointment) => {\n    try {\n      const res = await apiRequest(`/appointments/${updatedAppointment._id}`, {\n        method: \"PUT\",\n        body: updatedAppointment,\n      });\n\n      const updated = res?.data || res;\n      setAppointments((prev) =>\n        prev.map((appt) => (appt._id === updated._id ? updated : appt))\n      );\n      setIsModalOpen(false);\n    } catch (error) {\n      console.error(\"Failed to update appointment:\", error);\n    }\n  };\n\n  return (\n    <main className=\"flex flex-col gap-4 p-4\">\n      <div className=\"space-y-6 w-full\">\n        {/* Header */}\n        <Header\n          title=\"Appointments\"\n          description=\"Manage patient appointments and schedules\"\n          onNew={() => {\n            setEditingAppointment(null);\n            setIsModalOpen(true);\n          }}\n        />\n\n        {/* Appointment List full width */}\n        <AppointmentList\n          loading={loading}\n          date=\"All Appointments\"\n          appointments={appointments}\n          onEdit={(appt) => {\n            setEditingAppointment(appt);\n            setIsModalOpen(true);\n          }}\n        />\n      </div>\n\n      {/* Modal */}\n      {isModalOpen && (\n        <AppointmentModal\n          onClose={() => setIsModalOpen(false)}\n          onCreate={handleCreate}\n          onUpdate={handleUpdate}\n          appointment={editingAppointment}\n        />\n      )}\n    </main>\n  );\n};\n\nexport default AppointmentsPage;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAUA,MAAM,mBAAmB;IACvB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,4DAA4D,GAC5D,MAAM,oBAAoB;QACxB,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,iBAAiB;gBAAE,QAAQ;YAAM;YAE9D,QAAQ,GAAG,CAAC,yBAAyB,MAAM,wBAAwB;YAEnE,kDAAkD;YAClD,MAAM,OAAO,KAAK,MAAM,QAAQ,KAAK,QAAQ,EAAE;YAC/C,gBAAgB;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,gBAAgB,EAAE;QACpB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,wDAAwD,GACxD,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,iBAAiB;gBAC5C,QAAQ;gBACR,MAAM;YACR;YAEA,MAAM,UAAU,KAAK,QAAQ;YAC7B,gBAAgB,CAAC,OAAS;uBAAI;oBAAM;iBAAQ;YAC5C,eAAe;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD;IACF;IAEA,wDAAwD,GACxD,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,CAAC,cAAc,EAAE,mBAAmB,GAAG,EAAE,EAAE;gBACtE,QAAQ;gBACR,MAAM;YACR;YAEA,MAAM,UAAU,KAAK,QAAQ;YAC7B,gBAAgB,CAAC,OACf,KAAK,GAAG,CAAC,CAAC,OAAU,KAAK,GAAG,KAAK,QAAQ,GAAG,GAAG,UAAU;YAE3D,eAAe;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,uJAAM;wBACL,OAAM;wBACN,aAAY;wBACZ,OAAO;4BACL,sBAAsB;4BACtB,eAAe;wBACjB;;;;;;kCAIF,8OAAC,gKAAe;wBACd,SAAS;wBACT,MAAK;wBACL,cAAc;wBACd,QAAQ,CAAC;4BACP,sBAAsB;4BACtB,eAAe;wBACjB;;;;;;;;;;;;YAKH,6BACC,8OAAC;gBACC,SAAS,IAAM,eAAe;gBAC9B,UAAU;gBACV,UAAU;gBACV,aAAa;;;;;;;;;;;;AAKvB;uCAEe"}},
    {"offset": {"line": 933, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/appointments/page.jsx"],"sourcesContent":["\"use client\";\n\nimport AppointmentsPage from \"../components/pages/AppointmentsPage\";\n\nexport default function Appointments() {\n  return (\n    <AppointmentsPage />    \n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBACE,8OAAC,0JAAgB;;;;;AAErB"}}]
}