{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/sales/SalesFilters.jsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { Search } from \"lucide-react\";\n\nconst SalesFilters = ({ search, setSearch, filter, setFilter }) => {\n  return (\n    <div className=\"rounded-xl shadow-lg bg-white/80 backdrop-blur p-4\">\n      <div className=\"flex flex-col md:flex-row gap-4 items-center\">\n        {/* üîç Search */}\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5\" />\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"h-9 w-full rounded-md border border-gray-200 pl-10 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500\"\n            placeholder=\"Search by invoice, patient or product...\"\n          />\n        </div>\n\n        {/* üéØ Filters */}\n        <div className=\"flex gap-2 flex-wrap\">\n          {[\"all\", \"today\"].map((f) => (\n            <button\n              key={f}\n              onClick={() => setFilter(f)}\n              className={`h-8 px-4 rounded-md text-xs font-medium transition ${\n                filter === f\n                  ? \"bg-teal-600 text-white\"\n                  : \"border border-gray-200 text-slate-600 hover:bg-gray-100\"\n              }`}\n            >\n              {f === \"all\" ? \"All\" : f === \"today\" ? \"Today\" : f}\n            </button>\n          ))}\n\n          {/* Optional Revenue Filter */}\n          {/* <button\n            onClick={() => setFilter(\"highRevenue\")}\n            className={`h-8 px-4 rounded-md text-xs font-medium transition ${\n              filter === \"highRevenue\"\n                ? \"bg-teal-600 text-white\"\n                : \"border border-gray-200 text-slate-600 hover:bg-gray-100\"\n            }`}\n          >\n            High Revenue\n          </button> */}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SalesFilters;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,eAAe,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE;IAC5D,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,gNAAM;4BAAC,WAAU;;;;;;sCAClB,8OAAC;4BACC,OAAO;4BACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;4BACzC,WAAU;4BACV,aAAY;;;;;;;;;;;;8BAKhB,8OAAC;oBAAI,WAAU;8BACZ;wBAAC;wBAAO;qBAAQ,CAAC,GAAG,CAAC,CAAC,kBACrB,8OAAC;4BAEC,SAAS,IAAM,UAAU;4BACzB,WAAW,CAAC,mDAAmD,EAC7D,WAAW,IACP,2BACA,2DACJ;sCAED,MAAM,QAAQ,QAAQ,MAAM,UAAU,UAAU;2BAR5C;;;;;;;;;;;;;;;;;;;;;AA2BnB;uCAEe"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/sales/SalesRow.jsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nconst SalesRow = ({ sale }) => {\n  const date = new Date(sale.createdAt);\n\n  return (\n    <tr className=\"border-b border-gray-200 hover:bg-slate-50 text-sm\">\n      {/* Invoice */}\n      <td className=\"p-2 font-mono font-medium\">\n        {sale.invoiceNumber || sale._id.slice(-6)}\n      </td>\n\n      {/* Date / Time */}\n      <td className=\"p-2\">\n        <p className=\"font-medium\">{date.toLocaleDateString()}</p>\n        <p className=\"text-xs text-slate-500\">{date.toLocaleTimeString()}</p>\n      </td>\n\n      {/* Patient */}\n      <td className=\"p-2 font-medium\">{sale.patientName || \"Walk-in\"}</td>\n\n      {/* Items */}\n      <td className=\"p-2 text-slate-600\">{sale.products?.length || 0} items</td>\n\n      {/* Payment Status */}\n      <td className=\"p-2\">\n        <span\n          className={`border rounded-md px-2 py-0.5 text-xs ${\n            sale.paymentStatus === \"Paid\"\n              ? \"bg-emerald-100 text-emerald-700 border-emerald-200\"\n              : \"bg-amber-100 text-amber-700 border-amber-200\"\n          }`}\n        >\n          {sale.paymentStatus}\n        </span>\n      </td>\n\n      {/* Amount */}\n      <td className=\"p-2 font-bold text-slate-900\">\n        Rs {sale.totalAmount?.toFixed(2)}\n      </td>\n\n      {/* Profit */}\n      <td className=\"p-2 font-bold\">\n        <span\n          className={sale.profit >= 0 ? \"text-emerald-600\" : \"text-red-600\"}\n          title={`Revenue: Rs ${(sale.totalAmount - sale.profit).toFixed(2)}`}\n        >\n          Rs {sale.profit?.toFixed(2)}\n        </span>\n      </td>\n\n      {/* Status */}\n      <td className=\"p-2\">\n        <span className=\"px-2 py-0.5 text-xs rounded-md bg-emerald-100 text-emerald-800 border border-emerald-200\">\n          Completed\n        </span>\n      </td>\n    </tr>\n  );\n};\n\nexport default SalesRow;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,WAAW,CAAC,EAAE,IAAI,EAAE;IACxB,MAAM,OAAO,IAAI,KAAK,KAAK,SAAS;IAEpC,qBACE,8OAAC;QAAG,WAAU;;0BAEZ,8OAAC;gBAAG,WAAU;0BACX,KAAK,aAAa,IAAI,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;;;;;;0BAIzC,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBAAE,WAAU;kCAAe,KAAK,kBAAkB;;;;;;kCACnD,8OAAC;wBAAE,WAAU;kCAA0B,KAAK,kBAAkB;;;;;;;;;;;;0BAIhE,8OAAC;gBAAG,WAAU;0BAAmB,KAAK,WAAW,IAAI;;;;;;0BAGrD,8OAAC;gBAAG,WAAU;;oBAAsB,KAAK,QAAQ,EAAE,UAAU;oBAAE;;;;;;;0BAG/D,8OAAC;gBAAG,WAAU;0BACZ,cAAA,8OAAC;oBACC,WAAW,CAAC,sCAAsC,EAChD,KAAK,aAAa,KAAK,SACnB,uDACA,gDACJ;8BAED,KAAK,aAAa;;;;;;;;;;;0BAKvB,8OAAC;gBAAG,WAAU;;oBAA+B;oBACvC,KAAK,WAAW,EAAE,QAAQ;;;;;;;0BAIhC,8OAAC;gBAAG,WAAU;0BACZ,cAAA,8OAAC;oBACC,WAAW,KAAK,MAAM,IAAI,IAAI,qBAAqB;oBACnD,OAAO,CAAC,YAAY,EAAE,CAAC,KAAK,WAAW,GAAG,KAAK,MAAM,EAAE,OAAO,CAAC,IAAI;;wBACpE;wBACK,KAAK,MAAM,EAAE,QAAQ;;;;;;;;;;;;0BAK7B,8OAAC;gBAAG,WAAU;0BACZ,cAAA,8OAAC;oBAAK,WAAU;8BAA2F;;;;;;;;;;;;;;;;;AAMnH;uCAEe"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/authservice/api.jsx"],"sourcesContent":["// app/authservice/page.jsx\n\"use client\";\n\nimport axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\n\nconst BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ||\n  \"https://mediposbackend.onrender.com/api\";\n\n/**\n * Generic API request function\n */\nexport async function apiRequest(\n  endpoint,\n  {\n    method = \"GET\",\n    data = null,\n    headers = {},\n    includeAuth = false,\n    formData = false,\n    successMessage = null,\n    timeout = 30 * 60 * 1000, // 30 minutes\n    params = null,\n    onUploadProgress = null,\n  } = {}\n) {\n  try {\n    let finalHeaders = { ...headers };\n\n    // ---------------------------------------------------------\n    // Handle Content-Type logic\n    // ---------------------------------------------------------\n    if (formData) {\n      // VERY IMPORTANT: Do NOT set Content-Type here\n      // Browser will generate correct boundary\n      delete finalHeaders[\"Content-Type\"];\n    } else if (data && typeof data === \"object\") {\n      finalHeaders[\"Content-Type\"] = \"application/json\";\n      data = JSON.stringify(data);\n    }\n\n    // ---------------------------------------------------------\n    // Authorization Header\n    // ---------------------------------------------------------\n    if (includeAuth && typeof window !== \"undefined\") {\n      const token = localStorage.getItem(\"authToken\");\n      if (token) finalHeaders[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    // ---------------------------------------------------------\n    // Create Request URL\n    // ---------------------------------------------------------\n    const url = `${BASE_URL}${endpoint.startsWith(\"/\") ? endpoint : \"/\" + endpoint}`;\n\n    console.log(\"API Request:\", {\n      url,\n      method,\n      sendingFormData: formData,\n      headers: finalHeaders,\n      params,\n      data,\n    });\n\n    // ---------------------------------------------------------\n    // Axios Config\n    // ---------------------------------------------------------\n    const config = {\n      url,\n      method: method.toUpperCase(),\n      headers: finalHeaders,\n      timeout,\n      maxBodyLength: Infinity,\n      maxContentLength: Infinity,\n    };\n\n    if (params) config.params = params;\n\n    if (typeof onUploadProgress === \"function\") {\n      config.onUploadProgress = onUploadProgress;\n    }\n\n    // Attach body only for non-GET/HEAD\n    if (![\"GET\", \"HEAD\"].includes(config.method)) {\n      config.data = data;\n    }\n\n    // ---------------------------------------------------------\n    // Make Request\n    // ---------------------------------------------------------\n    const response = await axios(config);\n\n    // ---------------------------------------------------------\n    // Success Toast\n    // ---------------------------------------------------------\n    const msg = successMessage || response.data?.message;\n    if (msg && typeof window !== \"undefined\") {\n      toast.success(msg);\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(\"API Request Error:\", error);\n\n    const errorMessage =\n      error.response?.data?.message ||\n      error.response?.data?.error ||\n      (error.code === \"ECONNABORTED\"\n        ? \"Request timed out. Please try again.\"\n        : null) ||\n      (error.message?.includes(\"Network Error\")\n        ? \"Network error ‚Äî check your internet connection.\"\n        : null) ||\n      error.message ||\n      \"Something went wrong\";\n\n    if (typeof window !== \"undefined\") toast.error(errorMessage);\n\n    throw new Error(errorMessage);\n  }\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAG3B;AACA;AAHA;;;AAKA,MAAM,WACJ,QAAQ,GAAG,CAAC,wBAAwB,IACpC;AAKK,eAAe,WACpB,QAAQ,EACR,EACE,SAAS,KAAK,EACd,OAAO,IAAI,EACX,UAAU,CAAC,CAAC,EACZ,cAAc,KAAK,EACnB,WAAW,KAAK,EAChB,iBAAiB,IAAI,EACrB,UAAU,KAAK,KAAK,IAAI,EACxB,SAAS,IAAI,EACb,mBAAmB,IAAI,EACxB,GAAG,CAAC,CAAC;IAEN,IAAI;QACF,IAAI,eAAe;YAAE,GAAG,OAAO;QAAC;QAEhC,4DAA4D;QAC5D,4BAA4B;QAC5B,4DAA4D;QAC5D,IAAI,UAAU;YACZ,+CAA+C;YAC/C,yCAAyC;YACzC,OAAO,YAAY,CAAC,eAAe;QACrC,OAAO,IAAI,QAAQ,OAAO,SAAS,UAAU;YAC3C,YAAY,CAAC,eAAe,GAAG;YAC/B,OAAO,KAAK,SAAS,CAAC;QACxB;QAEA,4DAA4D;QAC5D,uBAAuB;QACvB,4DAA4D;QAC5D;;QAKA,4DAA4D;QAC5D,qBAAqB;QACrB,4DAA4D;QAC5D,MAAM,MAAM,GAAG,WAAW,SAAS,UAAU,CAAC,OAAO,WAAW,MAAM,UAAU;QAEhF,QAAQ,GAAG,CAAC,gBAAgB;YAC1B;YACA;YACA,iBAAiB;YACjB,SAAS;YACT;YACA;QACF;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,SAAS;YACb;YACA,QAAQ,OAAO,WAAW;YAC1B,SAAS;YACT;YACA,eAAe;YACf,kBAAkB;QACpB;QAEA,IAAI,QAAQ,OAAO,MAAM,GAAG;QAE5B,IAAI,OAAO,qBAAqB,YAAY;YAC1C,OAAO,gBAAgB,GAAG;QAC5B;QAEA,oCAAoC;QACpC,IAAI,CAAC;YAAC;YAAO;SAAO,CAAC,QAAQ,CAAC,OAAO,MAAM,GAAG;YAC5C,OAAO,IAAI,GAAG;QAChB;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,WAAW,MAAM,IAAA,gJAAK,EAAC;QAE7B,4DAA4D;QAC5D,gBAAgB;QAChB,4DAA4D;QAC5D,MAAM,MAAM,kBAAkB,SAAS,IAAI,EAAE;QAC7C;;QAIA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,MAAM,eACJ,MAAM,QAAQ,EAAE,MAAM,WACtB,MAAM,QAAQ,EAAE,MAAM,SACtB,CAAC,MAAM,IAAI,KAAK,iBACZ,yCACA,IAAI,KACR,CAAC,MAAM,OAAO,EAAE,SAAS,mBACrB,oDACA,IAAI,KACR,MAAM,OAAO,IACb;QAEF;;QAEA,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/sales/SalesTable.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport SalesRow from \"./SalesRow\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nconst SalesTable = ({ search = \"\", filter = \"all\" }) => {\n  const [allSales, setAllSales] = useState([]);\n  const todayStr = new Date().toLocaleDateString(\"en-US\", {\n    month: \"short\",\n    day: \"2-digit\",\n    year: \"numeric\",\n  });\n\n  // Fetch all sales once\n  useEffect(() => {\n    const fetchSales = async () => {\n      try {\n        const res = await apiRequest(\"/sales\", { method: \"GET\" });\n        if (res?.success) {\n          // Calculate profit for each sale\n          const enriched = res.data.map((sale) => {\n            let totalCost = 0;\n            if (sale.products && sale.products.length > 0) {\n              sale.products.forEach((p) => {\n                totalCost += (p.cost || 0) * (p.quantity || 0);\n              });\n            }\n            const profit = (sale.totalAmount || 0) - totalCost;\n            return { ...sale, profit };\n          });\n          setAllSales(enriched);\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch sales:\", err);\n      }\n    };\n\n    fetchSales();\n  }, []);\n\n  // Filter sales by search and date\n  const filteredSales = allSales.filter((sale) => {\n    const matchSearch =\n      (sale.invoiceNumber?.toString().toLowerCase().includes(search.toLowerCase()) || false) ||\n      (sale.customerName?.toLowerCase().includes(search.toLowerCase()) || false);\n\n    const saleDateStr = new Date(sale.createdAt).toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"2-digit\",\n      year: \"numeric\",\n    });\n    const matchFilter = filter === \"all\" || (filter === \"today\" && saleDateStr === todayStr);\n\n    return matchSearch && matchFilter;\n  });\n\n  return (\n    <div className=\"rounded-xl shadow-lg bg-white/80 backdrop-blur overflow-x-auto\">\n      <table className=\"whitespace-nowrap w-full text-sm\">\n        <thead className=\"border-b border-gray-300 bg-slate-50\">\n          <tr>\n            {[\n              \"Invoice\",\n              \"Date & Time\",\n              \"Customer\",\n              \"Items\",\n              \"Payment\",\n              \"Amount\",\n              \"Profit\",\n              \"Status\",\n            ].map((h) => (\n              <th key={h} className=\"p-2 text-left font-semibold text-slate-600\">\n                {h}\n              </th>\n            ))}\n          </tr>\n        </thead>\n\n        <tbody>\n          {filteredSales.length > 0 ? (\n            filteredSales.map((sale) => <SalesRow key={sale._id} sale={sale} />)\n          ) : (\n            <tr>\n              <td colSpan=\"8\" className=\"p-6 text-center text-slate-500\">\n                No sales found\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default SalesTable;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,aAAa,CAAC,EAAE,SAAS,EAAE,EAAE,SAAS,KAAK,EAAE;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC3C,MAAM,WAAW,IAAI,OAAO,kBAAkB,CAAC,SAAS;QACtD,OAAO;QACP,KAAK;QACL,MAAM;IACR;IAEA,uBAAuB;IACvB,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,UAAU;oBAAE,QAAQ;gBAAM;gBACvD,IAAI,KAAK,SAAS;oBAChB,iCAAiC;oBACjC,MAAM,WAAW,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;wBAC7B,IAAI,YAAY;wBAChB,IAAI,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,GAAG;4BAC7C,KAAK,QAAQ,CAAC,OAAO,CAAC,CAAC;gCACrB,aAAa,CAAC,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC;4BAC/C;wBACF;wBACA,MAAM,SAAS,CAAC,KAAK,WAAW,IAAI,CAAC,IAAI;wBACzC,OAAO;4BAAE,GAAG,IAAI;4BAAE;wBAAO;oBAC3B;oBACA,YAAY;gBACd;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;QACF;QAEA;IACF,GAAG,EAAE;IAEL,kCAAkC;IAClC,MAAM,gBAAgB,SAAS,MAAM,CAAC,CAAC;QACrC,MAAM,cACJ,AAAC,KAAK,aAAa,EAAE,WAAW,cAAc,SAAS,OAAO,WAAW,OAAO,SAC/E,KAAK,YAAY,EAAE,cAAc,SAAS,OAAO,WAAW,OAAO;QAEtE,MAAM,cAAc,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB,CAAC,SAAS;YACvE,OAAO;YACP,KAAK;YACL,MAAM;QACR;QACA,MAAM,cAAc,WAAW,SAAU,WAAW,WAAW,gBAAgB;QAE/E,OAAO,eAAe;IACxB;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAM,WAAU;;8BACf,8OAAC;oBAAM,WAAU;8BACf,cAAA,8OAAC;kCACE;4BACC;4BACA;4BACA;4BACA;4BACA;4BACA;4BACA;4BACA;yBACD,CAAC,GAAG,CAAC,CAAC,kBACL,8OAAC;gCAAW,WAAU;0CACnB;+BADM;;;;;;;;;;;;;;;8BAOf,8OAAC;8BACE,cAAc,MAAM,GAAG,IACtB,cAAc,GAAG,CAAC,CAAC,qBAAS,8OAAC,kJAAQ;4BAAgB,MAAM;2BAAhB,KAAK,GAAG;;;;sFAEnD,8OAAC;kCACC,cAAA,8OAAC;4BAAG,SAAQ;4BAAI,WAAU;sCAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;AASzE;uCAEe"}},
    {"offset": {"line": 534, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/sales/SalesStates.jsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { DollarSign, Receipt, TrendingUp } from \"lucide-react\";\n\nconst SalesStates = ({ stats }) => {\n  // Default fallback\n  const displayStats = stats || {\n    totalRevenue: 0,\n    totalProfit: 0,\n    totalSales: 0,\n    avgTransaction: 0,\n  };\n\n  const items = [\n    {\n      label: \"Total Revenue\",\n      value: `Rs ${displayStats.totalRevenue.toFixed(2)}`,\n      color: \"emerald\",\n      icon: DollarSign,\n    },\n    {\n      label: \"Transactions\",\n      value: displayStats.totalSales,\n      color: \"blue\",\n      icon: Receipt,\n    },\n    {\n      label: \"Avg Transaction\",\n      value: `Rs ${displayStats.avgTransaction.toFixed(2)}`,\n      color: \"purple\",\n      icon: TrendingUp,\n    },\n    {\n      label: \"Total Profit\",\n      value: `Rs ${displayStats.totalProfit.toFixed(2)}`,\n      color: \"teal\",\n      icon: TrendingUp,\n    },\n  ];\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n      {items.map((item, i) => {\n        const Icon = item.icon;\n\n        // Tailwind does not support dynamic class names in template strings\n        const textColor = `text-${item.color}-600`;\n        const bgFrom = `from-${item.color}-500`;\n        const bgTo = `to-${item.color}-600`;\n\n        return (\n          <div\n            key={i}\n            className=\"rounded-xl shadow-lg bg-white/80 backdrop-blur p-4 flex justify-between items-center\"\n          >\n            <div>\n              <p className=\"text-sm text-slate-600\">{item.label}</p>\n              <p className={`text-2xl font-bold mt-1 ${textColor}`}>\n                {item.value}\n              </p>\n            </div>\n\n            <div\n              className={`w-12 h-12 rounded-xl bg-gradient-to-br ${bgFrom} ${bgTo} flex items-center justify-center`}\n            >\n              <Icon className=\"w-6 h-6 text-white\" />\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default SalesStates;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAKA,MAAM,cAAc,CAAC,EAAE,KAAK,EAAE;IAC5B,mBAAmB;IACnB,MAAM,eAAe,SAAS;QAC5B,cAAc;QACd,aAAa;QACb,YAAY;QACZ,gBAAgB;IAClB;IAEA,MAAM,QAAQ;QACZ;YACE,OAAO;YACP,OAAO,CAAC,GAAG,EAAE,aAAa,YAAY,CAAC,OAAO,CAAC,IAAI;YACnD,OAAO;YACP,MAAM,gOAAU;QAClB;QACA;YACE,OAAO;YACP,OAAO,aAAa,UAAU;YAC9B,OAAO;YACP,MAAM,mNAAO;QACf;QACA;YACE,OAAO;YACP,OAAO,CAAC,GAAG,EAAE,aAAa,cAAc,CAAC,OAAO,CAAC,IAAI;YACrD,OAAO;YACP,MAAM,gOAAU;QAClB;QACA;YACE,OAAO;YACP,OAAO,CAAC,GAAG,EAAE,aAAa,WAAW,CAAC,OAAO,CAAC,IAAI;YAClD,OAAO;YACP,MAAM,gOAAU;QAClB;KACD;IAED,qBACE,8OAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,MAAM;YAChB,MAAM,OAAO,KAAK,IAAI;YAEtB,oEAAoE;YACpE,MAAM,YAAY,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC;YAC1C,MAAM,SAAS,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC;YACvC,MAAM,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC;YAEnC,qBACE,8OAAC;gBAEC,WAAU;;kCAEV,8OAAC;;0CACC,8OAAC;gCAAE,WAAU;0CAA0B,KAAK,KAAK;;;;;;0CACjD,8OAAC;gCAAE,WAAW,CAAC,wBAAwB,EAAE,WAAW;0CACjD,KAAK,KAAK;;;;;;;;;;;;kCAIf,8OAAC;wBACC,WAAW,CAAC,uCAAuC,EAAE,OAAO,CAAC,EAAE,KAAK,iCAAiC,CAAC;kCAEtG,cAAA,8OAAC;4BAAK,WAAU;;;;;;;;;;;;eAbb;;;;;QAiBX;;;;;;AAGN;uCAEe"}},
    {"offset": {"line": 648, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/pages/SalesPage.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport SalesFilters from \"../../components/sales/SalesFilters\";\nimport SalesTable from \"../../components/sales/SalesTable\";\nimport SalesStates from \"../../components/sales/SalesStates\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nconst SalesPage = () => {\n  const [search, setSearch] = useState(\"\");\n  const [filter, setFilter] = useState(\"all\");\n  const [sales, setSales] = useState([]);\n  const [stats, setStats] = useState({\n    totalRevenue: 0,\n    totalProfit: 0,\n    totalSales: 0,\n    avgTransaction: 0,\n  });\n\n  useEffect(() => {\n    fetchData();\n  }, [search, filter]);\n\n  const fetchData = async () => {\n    try {\n      const res = await apiRequest(\"/sales\", { method: \"GET\" });\n      if (res?.success) {\n        let filteredSales = res.data;\n\n        // üîç Search filter\n        if (search) {\n          filteredSales = filteredSales.filter((sale) =>\n            sale.customerName.toLowerCase().includes(search.toLowerCase()) ||\n            sale.products.some((p) =>\n              p.name.toLowerCase().includes(search.toLowerCase())\n            )\n          );\n        }\n\n        // üéØ Status filter\n        if (filter !== \"all\") {\n          filteredSales = filteredSales.filter(\n            (sale) => sale.paymentStatus === filter\n          );\n        }\n\n        // üìä Calculate profit per sale\n        filteredSales = filteredSales.map((sale) => {\n          const totalCost = sale.products?.reduce(\n            (sum, p) => sum + (p.cost || 0) * (p.quantity || 0),\n            0\n          ) || 0;\n          const profit = (sale.totalAmount || 0) - totalCost;\n          return { ...sale, profit, totalCost };\n        });\n\n        const totalRevenue = filteredSales.reduce(\n          (sum, s) => sum + (s.totalAmount || 0),\n          0\n        );\n        const totalProfit = filteredSales.reduce(\n          (sum, s) => sum + (s.profit || 0),\n          0\n        );\n        const totalSales = filteredSales.length;\n        const avgTransaction = totalSales > 0 ? totalRevenue / totalSales : 0;\n\n        setSales(filteredSales);\n        setStats({ totalRevenue, totalProfit, totalSales, avgTransaction });\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch sales\", error);\n    }\n  };\n\n  return (\n    <main className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-slate-900\">Sales History</h1>\n        <p className=\"text-slate-600 mt-1\">View sales, revenue & profit</p>\n      </div>\n\n      <SalesStates stats={stats} />\n      <SalesFilters\n        search={search}\n        setSearch={setSearch}\n        filter={filter}\n        setFilter={setFilter}\n      />\n      <SalesTable search={search} filter={filter} />\n    </main>\n  );\n};\n\nexport default SalesPage;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQA,MAAM,YAAY;IAChB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;QACjC,cAAc;QACd,aAAa;QACb,YAAY;QACZ,gBAAgB;IAClB;IAEA,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;QAAQ;KAAO;IAEnB,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,wIAAU,EAAC,UAAU;gBAAE,QAAQ;YAAM;YACvD,IAAI,KAAK,SAAS;gBAChB,IAAI,gBAAgB,IAAI,IAAI;gBAE5B,mBAAmB;gBACnB,IAAI,QAAQ;oBACV,gBAAgB,cAAc,MAAM,CAAC,CAAC,OACpC,KAAK,YAAY,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW,OAC3D,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,IAClB,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;gBAGtD;gBAEA,mBAAmB;gBACnB,IAAI,WAAW,OAAO;oBACpB,gBAAgB,cAAc,MAAM,CAClC,CAAC,OAAS,KAAK,aAAa,KAAK;gBAErC;gBAEA,+BAA+B;gBAC/B,gBAAgB,cAAc,GAAG,CAAC,CAAC;oBACjC,MAAM,YAAY,KAAK,QAAQ,EAAE,OAC/B,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC,GAClD,MACG;oBACL,MAAM,SAAS,CAAC,KAAK,WAAW,IAAI,CAAC,IAAI;oBACzC,OAAO;wBAAE,GAAG,IAAI;wBAAE;wBAAQ;oBAAU;gBACtC;gBAEA,MAAM,eAAe,cAAc,MAAM,CACvC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,WAAW,IAAI,CAAC,GACrC;gBAEF,MAAM,cAAc,cAAc,MAAM,CACtC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,MAAM,IAAI,CAAC,GAChC;gBAEF,MAAM,aAAa,cAAc,MAAM;gBACvC,MAAM,iBAAiB,aAAa,IAAI,eAAe,aAAa;gBAEpE,SAAS;gBACT,SAAS;oBAAE;oBAAc;oBAAa;oBAAY;gBAAe;YACnE;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC;wBAAE,WAAU;kCAAsB;;;;;;;;;;;;0BAGrC,8OAAC,qJAAW;gBAAC,OAAO;;;;;;0BACpB,8OAAC,sJAAY;gBACX,QAAQ;gBACR,WAAW;gBACX,QAAQ;gBACR,WAAW;;;;;;0BAEb,8OAAC,oJAAU;gBAAC,QAAQ;gBAAQ,QAAQ;;;;;;;;;;;;AAG1C;uCAEe"}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/sales/page.jsx"],"sourcesContent":["// app/pos/page.jsx\n\"use client\";\n\nimport SalesPage from \"../components/pages/SalesPage\";\n\nexport default function Sales() {\n  return (\n  <SalesPage/>\n  );\n}\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;AAGnB;AAFA;;;AAIe,SAAS;IACtB,qBACA,8OAAC,mJAAS;;;;;AAEZ"}}]
}