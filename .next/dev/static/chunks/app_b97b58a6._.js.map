{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/products/ProductCard.jsx"],"sourcesContent":["\"use client\"; // required for client-side state\n\nimport React from \"react\";\n\nexport default function ProductCard({ title, count, color, Icon }) {\n  const gradientFrom = `from-${color}-500`;\n  const gradientTo = `to-${color}-600`;\n\n  return (\n    <div className=\"rounded-xl text-card-foreground border-0 shadow-lg bg-white/80 backdrop-blur cursor-pointer hover:scale-105 transition-transform\">\n      <div className=\"p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm text-slate-600\">{title}</p>\n            <p className={`text-2xl font-bold mt-1 ${color === 'red' ? 'text-red-600' : color === 'green' ? 'text-emerald-600' : color === 'amber' ? 'text-amber-600' : 'text-slate-900'}`}>{count}</p>\n          </div>\n          <div className={`w-12 h-12 bg-gradient-to-br ${gradientFrom} ${gradientTo} rounded-xl flex items-center justify-center`}>\n            <Icon className=\"w-6 h-6 text-white\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA,cAAc,iCAAiC;;;AAIhC,SAAS,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IAC/D,MAAM,eAAe,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC;IACxC,MAAM,aAAa,CAAC,GAAG,EAAE,MAAM,IAAI,CAAC;IAEpC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAE,WAAU;0CAA0B;;;;;;0CACvC,6LAAC;gCAAE,WAAW,CAAC,wBAAwB,EAAE,UAAU,QAAQ,iBAAiB,UAAU,UAAU,qBAAqB,UAAU,UAAU,mBAAmB,kBAAkB;0CAAG;;;;;;;;;;;;kCAEnL,6LAAC;wBAAI,WAAW,CAAC,4BAA4B,EAAE,aAAa,CAAC,EAAE,WAAW,4CAA4C,CAAC;kCACrH,cAAA,6LAAC;4BAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5B;KAnBwB"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/products/ProductTable.jsx"],"sourcesContent":["\"use client\"; // required for client-side state\n\nimport React, { useMemo } from \"react\";\nimport { Pen, Package } from \"lucide-react\";\n\nconst ProductTable = ({ products, onEdit }) => {\n  // Merge products with the same name and sum their stock\n  const mergedProducts = useMemo(() => {\n    const map = new Map();\n\n    products.forEach((p) => {\n      const key = p.name.trim().toLowerCase(); // normalize name\n      if (map.has(key)) {\n        const existing = map.get(key);\n        map.set(key, {\n          ...existing,\n          stock: existing.stock + (Number(p.stock) || 0),\n        });\n      } else {\n        map.set(key, { ...p, stock: Number(p.stock) || 0 });\n      }\n    });\n\n    return Array.from(map.values());\n  }, [products]);\n\n  return (\n    <div className=\"rounded-xl border-0 shadow-lg bg-white/80 backdrop-blur p-0 overflow-x-auto\">\n      <div className=\"relative w-full overflow-auto\">\n        <table className=\"w-full text-sm caption-bottom\">\n          <thead className=\"[&_tr]:border-b\">\n            <tr className=\"border-b border-b-gray-300 text-gray-400 transition-colors hover:bg-muted/50 bg-slate-50\">\n              <th className=\"h-10 px-2 text-left align-middle font-semibold text-muted-foreground\">Product</th>\n              <th className=\"h-10 px-2 text-left align-middle font-semibold text-muted-foreground\">Code</th>\n              <th className=\"h-10 px-2 text-left align-middle font-semibold text-muted-foreground\">Category</th>\n              <th className=\"h-10 px-2 text-left align-middle font-semibold text-muted-foreground\">Price</th>\n              <th className=\"h-10 px-2 text-left align-middle font-semibold text-muted-foreground\">Stock</th>\n              <th className=\"h-10 px-2 text-left align-middle font-semibold text-muted-foreground\">Status</th>\n              <th className=\"h-10 px-2 text-left align-middle font-semibold text-muted-foreground\">Actions</th>\n            </tr>\n          </thead>\n\n          <tbody className=\"[&_tr:last-child]:border-0\">\n            {mergedProducts.length === 0 ? (\n              <tr>\n                <td colSpan={7}>\n                  <div className=\"text-center py-12 text-slate-500\">\n                    <Package className=\"w-12 h-12 mx-auto mb-3 text-slate-300\" />\n                    <p className=\"text-lg font-medium\">No products found</p>\n                    <p className=\"text-sm\">Try adjusting your search or filters</p>\n                  </div>\n                </td>\n              </tr>\n            ) : (\n              mergedProducts.map((p) => (\n                <tr key={p.id || p.name} className=\"border-b border-b-gray-100 transition-colors hover:bg-slate-50\">\n                  {/* Product Name & Manufacturer */}\n                  <td className=\"p-2 align-middle\">\n                    <div>\n                      <p className=\"font-medium text-slate-900\">{p.name}</p>\n                      <p className=\"text-xs text-slate-500\">{p.manufacturer}</p>\n                    </div>\n                  </td>\n\n                  {/* Product Code */}\n                  <td className=\"p-2 align-middle font-mono text-sm\">{p.code}</td>\n\n                  {/* Category Badge */}\n                  <td className=\"p-2 align-middle\">\n                    <div className=\"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold text-foreground border-slate-200\">\n                      {p.category}\n                    </div>\n                  </td>\n\n                  {/* Price & Cost */}\n                  <td className=\"p-2 align-middle\">\n                    <div className=\"text-sm\">\n                      <p className=\"font-semibold text-slate-900\">Rs.{p.price}</p>\n                      {p.cost && <p className=\"text-xs text-slate-500\">Cost: Rs.{p.cost}</p>}\n                    </div>\n                  </td>\n\n                  {/* Stock */}\n                  <td className=\"p-2 align-middle\">\n                    <div className=\"flex flex-col gap-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className={`font-semibold ${p.stock <= 10 ? \"text-amber-600\" : \"text-emerald-600\"}`}>\n                          {p.stock}\n                        </span>\n                        <span className=\"text-xs text-slate-500\">{p.unit}</span>\n                      </div>\n\n                      {/* Show Low Stock badge only if total stock <= 10 */}\n                      {p.stock <= 10 && (\n                        <div className=\"w-20 inline-flex items-center rounded-md px-2.5 py-0.5 text-xs font-semibold shadow bg-amber-100 text-amber-800 border-amber-200\">\n                          Low Stock\n                        </div>\n                      )}\n                    </div>\n                  </td>\n\n                  {/* Status Badge */}\n                  <td className=\"p-2 align-middle\">\n                    <div\n                      className={`inline-flex items-center rounded-md px-2.5 py-0.5 text-xs font-semibold shadow ${\n                        p.status === \"Active\"\n                          ? \"bg-emerald-100 text-emerald-800 border-emerald-200\"\n                          : \"bg-red-100 text-red-800 border-red-200\"\n                      }`}\n                    >\n                      {p.status}\n                    </div>\n                  </td>\n\n                  {/* Actions */}\n                  <td className=\"p-2 align-middle\">\n                    <button\n                      onClick={() => onEdit(p)}\n                      className=\"inline-flex items-center justify-center gap-1 px-3 py-2 rounded-md border border-gray-200 bg-background hover:bg-accent hover:text-accent-foreground text-xs\"\n                    >\n                      <Pen className=\"w-4 h-4\" />\n                    </button>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductTable;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/authservice/api.jsx"],"sourcesContent":["// app/authservice/page.jsx\n\"use client\";\n\nimport axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\n\nconst BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ||\n  \"https://mediposbackend.onrender.com/api\";\n\n/**\n * Generic API request function\n */\nexport async function apiRequest(\n  endpoint,\n  {\n    method = \"GET\",\n    data = null,\n    headers = {},\n    includeAuth = false,\n    formData = false,\n    successMessage = null,\n    timeout = 30 * 60 * 1000, // 30 minutes\n    params = null,\n    onUploadProgress = null,\n  } = {}\n) {\n  try {\n    let finalHeaders = { ...headers };\n\n    // ---------------------------------------------------------\n    // Handle Content-Type logic\n    // ---------------------------------------------------------\n    if (formData) {\n      // VERY IMPORTANT: Do NOT set Content-Type here\n      // Browser will generate correct boundary\n      delete finalHeaders[\"Content-Type\"];\n    } else if (data && typeof data === \"object\") {\n      finalHeaders[\"Content-Type\"] = \"application/json\";\n      data = JSON.stringify(data);\n    }\n\n    // ---------------------------------------------------------\n    // Authorization Header\n    // ---------------------------------------------------------\n    if (includeAuth && typeof window !== \"undefined\") {\n      const token = localStorage.getItem(\"authToken\");\n      if (token) finalHeaders[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    // ---------------------------------------------------------\n    // Create Request URL\n    // ---------------------------------------------------------\n    const url = `${BASE_URL}${endpoint.startsWith(\"/\") ? endpoint : \"/\" + endpoint}`;\n\n    console.log(\"API Request:\", {\n      url,\n      method,\n      sendingFormData: formData,\n      headers: finalHeaders,\n      params,\n      data,\n    });\n\n    // ---------------------------------------------------------\n    // Axios Config\n    // ---------------------------------------------------------\n    const config = {\n      url,\n      method: method.toUpperCase(),\n      headers: finalHeaders,\n      timeout,\n      maxBodyLength: Infinity,\n      maxContentLength: Infinity,\n    };\n\n    if (params) config.params = params;\n\n    if (typeof onUploadProgress === \"function\") {\n      config.onUploadProgress = onUploadProgress;\n    }\n\n    // Attach body only for non-GET/HEAD\n    if (![\"GET\", \"HEAD\"].includes(config.method)) {\n      config.data = data;\n    }\n\n    // ---------------------------------------------------------\n    // Make Request\n    // ---------------------------------------------------------\n    const response = await axios(config);\n\n    // ---------------------------------------------------------\n    // Success Toast\n    // ---------------------------------------------------------\n    const msg = successMessage || response.data?.message;\n    if (msg && typeof window !== \"undefined\") {\n      toast.success(msg);\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(\"API Request Error:\", error);\n\n    const errorMessage =\n      error.response?.data?.message ||\n      error.response?.data?.error ||\n      (error.code === \"ECONNABORTED\"\n        ? \"Request timed out. Please try again.\"\n        : null) ||\n      (error.message?.includes(\"Network Error\")\n        ? \"Network error — check your internet connection.\"\n        : null) ||\n      error.message ||\n      \"Something went wrong\";\n\n    if (typeof window !== \"undefined\") toast.error(errorMessage);\n\n    throw new Error(errorMessage);\n  }\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAOzB;AAJF;AACA;AAHA;;;AAKA,MAAM,WACJ,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IACpC;AAKK,eAAe,WACpB,QAAQ,EACR,EACE,SAAS,KAAK,EACd,OAAO,IAAI,EACX,UAAU,CAAC,CAAC,EACZ,cAAc,KAAK,EACnB,WAAW,KAAK,EAChB,iBAAiB,IAAI,EACrB,UAAU,KAAK,KAAK,IAAI,EACxB,SAAS,IAAI,EACb,mBAAmB,IAAI,EACxB,GAAG,CAAC,CAAC;IAEN,IAAI;QACF,IAAI,eAAe;YAAE,GAAG,OAAO;QAAC;QAEhC,4DAA4D;QAC5D,4BAA4B;QAC5B,4DAA4D;QAC5D,IAAI,UAAU;YACZ,+CAA+C;YAC/C,yCAAyC;YACzC,OAAO,YAAY,CAAC,eAAe;QACrC,OAAO,IAAI,QAAQ,OAAO,SAAS,UAAU;YAC3C,YAAY,CAAC,eAAe,GAAG;YAC/B,OAAO,KAAK,SAAS,CAAC;QACxB;QAEA,4DAA4D;QAC5D,uBAAuB;QACvB,4DAA4D;QAC5D,IAAI,eAAe,+CAAkB,aAAa;YAChD,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO,YAAY,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAC9D;QAEA,4DAA4D;QAC5D,qBAAqB;QACrB,4DAA4D;QAC5D,MAAM,MAAM,GAAG,WAAW,SAAS,UAAU,CAAC,OAAO,WAAW,MAAM,UAAU;QAEhF,QAAQ,GAAG,CAAC,gBAAgB;YAC1B;YACA;YACA,iBAAiB;YACjB,SAAS;YACT;YACA;QACF;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,SAAS;YACb;YACA,QAAQ,OAAO,WAAW;YAC1B,SAAS;YACT;YACA,eAAe;YACf,kBAAkB;QACpB;QAEA,IAAI,QAAQ,OAAO,MAAM,GAAG;QAE5B,IAAI,OAAO,qBAAqB,YAAY;YAC1C,OAAO,gBAAgB,GAAG;QAC5B;QAEA,oCAAoC;QACpC,IAAI,CAAC;YAAC;YAAO;SAAO,CAAC,QAAQ,CAAC,OAAO,MAAM,GAAG;YAC5C,OAAO,IAAI,GAAG;QAChB;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,WAAW,MAAM,IAAA,mJAAK,EAAC;QAE7B,4DAA4D;QAC5D,gBAAgB;QAChB,4DAA4D;QAC5D,MAAM,MAAM,kBAAkB,SAAS,IAAI,EAAE;QAC7C,IAAI,OAAO,+CAAkB,aAAa;YACxC,mKAAK,CAAC,OAAO,CAAC;QAChB;QAEA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,MAAM,eACJ,MAAM,QAAQ,EAAE,MAAM,WACtB,MAAM,QAAQ,EAAE,MAAM,SACtB,CAAC,MAAM,IAAI,KAAK,iBACZ,yCACA,IAAI,KACR,CAAC,MAAM,OAAO,EAAE,SAAS,mBACrB,oDACA,IAAI,KACR,MAAM,OAAO,IACb;QAEF,wCAAmC,mKAAK,CAAC,KAAK,CAAC;QAE/C,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/products/ProductEditModel.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { X, CheckCircle, AlertTriangle } from \"lucide-react\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nconst ProductEditModal = ({ productId, onClose }) => {\n  const [loading, setLoading] = useState(false);\n  const [fetching, setFetching] = useState(true);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    name: \"\",\n    code: \"\",\n    category: \"\",\n    unit: \"Piece\",\n    cost: \"\",\n    price: \"\",\n    stock: \"\",\n    manufacturer: \"\",\n    status: \"Active\",\n    description: \"\",\n    date: \"\",\n  });\n\n  const [formErrors, setFormErrors] = useState({});\n\n  /* ---------------- FETCH PRODUCT ---------------- */\n  useEffect(() => {\n    if (!productId) return;\n\n    const fetchProduct = async () => {\n      try {\n        setFetching(true);\n\n        // ✅ apiRequest returns response.data directly\n        const product = await apiRequest(`/products/getProductById/${productId}`, { method: \"GET\" });\n\n        if (!product || !product._id) {\n          throw new Error(\"Invalid product response\");\n        }\n\n        const d = product.date ? new Date(product.date) : null;\n        const formattedDate = d\n          ? `${String(d.getDate()).padStart(2, \"0\")}/${String(\n              d.getMonth() + 1\n            ).padStart(2, \"0\")}/${d.getFullYear()}`\n          : \"\";\n\n        setFormData({\n          name: product.name || \"\",\n          code: product.code || \"\",\n          category: product.category || \"\",\n          unit: product.unit || \"Piece\",\n          cost: product.cost ?? \"\",\n          price: product.price ?? \"\",\n          stock: product.stock ?? \"\",\n          manufacturer: product.manufacturer || \"\",\n          status: product.status || \"Active\",\n          description: product.description || \"\",\n          date: formattedDate,\n        });\n      } catch (err) {\n        console.error(\"FETCH PRODUCT ERROR:\", err);\n        setErrorMessage(err.message || \"Failed to fetch product details\");\n        setShowError(true);\n      } finally {\n        setFetching(false);\n      }\n    };\n\n    fetchProduct();\n  }, [productId]);\n\n  /* ---------------- HANDLERS ---------------- */\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n    setFormErrors((prev) => ({ ...prev, [name]: \"\" }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    let errors = {};\n    if (!formData.name) errors.name = \"Product name is required.\";\n    if (!formData.category) errors.category = \"Category is required.\";\n    if (!formData.cost) errors.cost = \"Cost is required.\";\n    if (!formData.price) errors.price = \"Selling price is required.\";\n    if (!formData.stock) errors.stock = \"Stock is required.\";\n    if (!formData.manufacturer)\n      errors.manufacturer = \"Manufacturer is required.\";\n    if (!formData.date) errors.date = \"Date is required.\";\n\n    if (Object.keys(errors).length) {\n      setFormErrors(errors);\n      return;\n    }\n\n    const [day, month, year] = formData.date.split(\"/\");\n    const isoDate = new Date(`${year}-${month}-${day}`);\n\n    const payload = {\n      name: formData.name.trim(),\n      category: formData.category,\n      unit: formData.unit,\n      cost: Number(formData.cost),\n      price: Number(formData.price),\n      stock: Number(formData.stock),\n      manufacturer: formData.manufacturer.trim(),\n      status: formData.status,\n      description: formData.description.trim(),\n      date: isoDate,\n    };\n\n    try {\n      setLoading(true);\n\n      await apiRequest(`/products/updateProduct/${productId}`, {\n        method: \"PUT\",\n        data: payload,\n      });\n\n      setShowSuccess(true);\n      setTimeout(() => {\n        setShowSuccess(false);\n        onClose();\n      }, 1200);\n    } catch (error) {\n      setErrorMessage(\n        error?.message || \"Failed to update product\"\n      );\n      setShowError(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (fetching) return null;\n\n  return (\n    <>\n      {/* SUCCESS */}\n      {showSuccess && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]\">\n          <div className=\"bg-white p-6 rounded-xl text-center\">\n            <CheckCircle className=\"text-green-600 w-12 h-12 mx-auto mb-2\" />\n            <h2 className=\"text-lg font-bold\">Updated</h2>\n            <p className=\"text-gray-600\">Product updated successfully</p>\n          </div>\n        </div>\n      )}\n\n      {/* ERROR */}\n      {showError && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]\">\n          <div className=\"bg-white p-6 rounded-xl text-center\">\n            <AlertTriangle className=\"text-red-600 w-12 h-12 mx-auto mb-2\" />\n            <p className=\"text-gray-600\">{errorMessage}</p>\n            <button\n              onClick={() => setShowError(false)}\n              className=\"mt-3 px-4 py-2 bg-red-600 text-white rounded-md\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* MODAL */}\n      <div className=\"fixed inset-0 bg-black/50 z-[9998] flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-2xl max-w-3xl w-full\">\n          <div className=\"bg-teal-600 text-white p-6 flex justify-between rounded-t-2xl\">\n            <h2 className=\"text-xl font-bold\">Edit Product</h2>\n            <button onClick={onClose}>\n              <X />\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              {[\n                [\"name\", \"Product Name *\"],\n                [\"code\", \"Product Code\"],\n                [\"cost\", \"Cost Price *\"],\n                [\"price\", \"Selling Price *\"],\n                [\"stock\", \"Stock *\"],\n                [\"manufacturer\", \"Manufacturer *\"],\n              ].map(([key, label]) => (\n                <div key={key}>\n                  <label className=\"text-sm font-medium\">{label}</label>\n                  <input\n                    name={key}\n                    value={formData[key]}\n                    onChange={handleChange}\n                    readOnly={key === \"code\"}\n                    className=\"w-full h-9 border rounded-md px-3\"\n                  />\n                </div>\n              ))}\n\n              <select\n                name=\"category\"\n                value={formData.category}\n                onChange={handleChange}\n                className=\"h-9 border rounded-md px-3\"\n              >\n                <option value=\"\">Select Category</option>\n                <option value=\"Medicines\">Medicines</option>\n                <option value=\"Surgical Equipment\">Surgical Equipment</option>\n                <option value=\"Medical Consumables\">Medical Consumables</option>\n                <option value=\"Lab Equipment\">Lab Equipment</option>\n              </select>\n\n              <select\n                name=\"unit\"\n                value={formData.unit}\n                onChange={handleChange}\n                className=\"h-9 border rounded-md px-3\"\n              >\n                <option value=\"Piece\">Piece</option>\n                <option value=\"Strip\">Strip</option>\n                <option value=\"Box\">Box</option>\n                <option value=\"Bottle\">Bottle</option>\n              </select>\n\n              <input\n                name=\"date\"\n                value={formData.date}\n                onChange={handleChange}\n                placeholder=\"dd/mm/yyyy\"\n                className=\"h-9 border rounded-md px-3\"\n              />\n            </div>\n\n            <textarea\n              name=\"description\"\n              value={formData.description}\n              onChange={handleChange}\n              rows={3}\n              className=\"w-full border rounded-md px-3 py-2\"\n            />\n\n            <div className=\"flex justify-end gap-3\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"border px-4 py-2 rounded-md\"\n              >\n                Cancel\n              </button>\n              <button\n                disabled={loading}\n                className=\"bg-teal-600 text-white px-4 py-2 rounded-md\"\n              >\n                {loading ? \"Updating...\" : \"Update Product\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProductEditModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1066, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/products/ProductModel.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { X, CheckCircle, AlertTriangle } from \"lucide-react\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nconst ProductModal = ({ onClose }) => {\n  const [loading, setLoading] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [invoiceNumber, setInvoiceNumber] = useState(\"\");\n  const [invoiceProducts, setInvoiceProducts] = useState([]); // All products in invoice\n\n  const [formData, setFormData] = useState({\n    name: \"\",\n    code: \"\",\n    category: \"\",\n    unit: \"Piece\",\n    cost: \"\",\n    price: \"\",\n    stock: \"\",\n    manufacturer: \"\",\n    bno: \"\",\n    mfg: \"\",\n    exp: \"\",\n    status: \"Active\",\n    description: \"\",\n    date: \"\",\n  });\n\n  const [formErrors, setFormErrors] = useState({});\n\n  // Auto-generate product code\n  const generateCode = () => {\n    const randomNum = Math.floor(1000 + Math.random() * 9000);\n    const timestamp = Date.now().toString().slice(-4);\n    return `PRD-${timestamp}${randomNum}`;\n  };\n\n  // Initialize date and code\n  useEffect(() => {\n    const today = new Date();\n    const formattedDate = `${String(today.getDate()).padStart(2, \"0\")}/${String(\n      today.getMonth() + 1\n    ).padStart(2, \"0\")}/${today.getFullYear()}`;\n\n    setFormData((prev) => ({\n      ...prev,\n      code: generateCode(),\n      date: formattedDate,\n    }));\n  }, []);\n\n  const parseDMYToISO = (dmy) => {\n    if (!dmy) return null;\n    const [day, month, year] = dmy.split(\"/\");\n    return new Date(`${year}-${month}-${day}`);\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n    setFormErrors((prev) => ({ ...prev, [name]: \"\" }));\n  };\n\n  // Fill form data from a product\n  const fillFormWithProduct = (prod) => {\n    setFormData((prev) => ({\n      ...prev,\n      name: prod.name || \"\",\n      code: prod.code || generateCode(), // ✅ Update code from product\n      cost: prod.price || \"\",\n      price: prod.price || \"\",\n      stock: prod.quantity || \"\",\n      manufacturer: prod.manufacturer || \"\",\n      bno: prod.bno || \"\",\n      mfg: prod.mfg ? new Date(prod.mfg).toLocaleDateString(\"en-GB\") : \"\",\n      exp: prod.exp ? new Date(prod.exp).toLocaleDateString(\"en-GB\") : \"\",\n    }));\n  };\n\n  // Fetch purchase products by invoice\n  const handleInvoiceKeyPress = async (e) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      if (!invoiceNumber) return;\n\n      try {\n        const response = await apiRequest(\"/purchases\", { method: \"GET\" });\n        const purchases = response?.data || [];\n        const purchase = purchases.find(\n          (p) => String(p.invoiceNumber) === String(invoiceNumber)\n        );\n\n        if (!purchase || !purchase.products || purchase.products.length === 0) {\n          setShowError(true);\n          setErrorMessage(\"Invoice not found or has no products.\");\n          return;\n        }\n\n        setInvoiceProducts(purchase.products);\n\n        // Auto-fill first product if single\n        if (purchase.products.length === 1) {\n          fillFormWithProduct(purchase.products[0]);\n        }\n      } catch (error) {\n        setShowError(true);\n        setErrorMessage(error?.response?.data?.message || \"Failed to fetch purchase.\");\n      }\n    }\n  };\n\n  const handleProductSelect = (e) => {\n    const prodName = e.target.value;\n    const selectedProd = invoiceProducts.find((p) => p.name === prodName);\n    if (selectedProd) fillFormWithProduct(selectedProd);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    let errors = {};\n    if (!formData.name) errors.name = \"Product name is required.\";\n    if (!formData.category) errors.category = \"Category is required.\";\n    if (!formData.cost) errors.cost = \"Cost is required.\";\n    if (!formData.price) errors.price = \"Selling price is required.\";\n    if (!formData.stock) errors.stock = \"Stock is required.\";\n    if (!formData.manufacturer) errors.manufacturer = \"Manufacturer is required.\";\n    if (!formData.date) errors.date = \"Date is required.\";\n    if (!formData.description) errors.description = \"Description is required.\";\n\n    if (Object.keys(errors).length > 0) {\n      setFormErrors(errors);\n      return;\n    }\n\n    const payload = {\n      name: formData.name.trim(),\n      code: formData.code.trim().toUpperCase(),\n      category: formData.category,\n      unit: formData.unit,\n      cost: Number(formData.cost),\n      price: Number(formData.price),\n      stock: Number(formData.stock),\n      manufacturer: formData.manufacturer.trim(),\n      bno: formData.bno.trim(),\n      mfg: parseDMYToISO(formData.mfg),\n      exp: parseDMYToISO(formData.exp),\n      status: formData.status,\n      description: formData.description.trim(),\n      date: parseDMYToISO(formData.date),\n    };\n\n    try {\n      setLoading(true);\n      await apiRequest(\"/products/createProduct\", {\n        method: \"POST\",\n        data: payload,\n      });\n\n      setShowSuccess(true);\n      setTimeout(() => {\n        setShowSuccess(false);\n        onClose();\n      }, 1500);\n    } catch (error) {\n      setErrorMessage(error?.response?.data?.message || \"Failed to create product.\");\n      setShowError(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      {showSuccess && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]\">\n          <div className=\"bg-white p-6 rounded-xl shadow-xl text-center\">\n            <CheckCircle className=\"text-green-600 w-12 h-12 mx-auto mb-2\" />\n            <h2 className=\"text-lg font-bold text-green-700\">Success</h2>\n            <p className=\"text-gray-600\">Product created successfully</p>\n          </div>\n        </div>\n      )}\n\n      {showError && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]\">\n          <div className=\"bg-white p-6 rounded-xl shadow-xl text-center\">\n            <AlertTriangle className=\"text-red-600 w-12 h-12 mx-auto mb-2\" />\n            <h2 className=\"text-lg font-bold text-red-700\">Error</h2>\n            <p className=\"text-gray-600\">{errorMessage}</p>\n            <button\n              onClick={() => setShowError(false)}\n              className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded-md\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[9998] flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-2xl shadow-2xl max-w-xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"bg-gradient-to-r from-teal-500 to-teal-600 text-white p-6 rounded-t-2xl flex justify-between\">\n            <h2 className=\"text-2xl font-bold\">New Product</h2>\n            <button onClick={onClose}>\n              <X />\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n            {/* Invoice Number Input */}\n            <div>\n              <label className=\"text-sm font-medium\">Invoice No.</label>\n              <input\n                type=\"text\"\n                name=\"invoiceNumber\"\n                value={invoiceNumber}\n                onChange={(e) => setInvoiceNumber(e.target.value)}\n                onKeyPress={handleInvoiceKeyPress}\n                placeholder=\"Enter Invoice Number of New Supply and press Enter\"\n                className=\"w-full h-9 rounded-md border px-3 mb-2\"\n              />\n            </div>\n\n            {/* Product Name Input or Select if multiple products */}\n            <div>\n              <label className=\"text-sm font-medium\">Product Name *</label>\n              {invoiceProducts.length > 1 ? (\n                <select\n                  value={formData.name}\n                  onChange={handleProductSelect}\n                  className=\"w-full h-9 rounded-md border px-3\"\n                >\n                  <option value=\"\">Select product</option>\n                  {invoiceProducts.map((p, idx) => (\n                    <option key={idx} value={p.name}>\n                      {p.name}\n                    </option>\n                  ))}\n                </select>\n              ) : (\n                <input\n                  name=\"name\"\n                  value={formData.name}\n                  placeholder=\"Enter product name\"\n                  onChange={handleChange}\n                  className=\"w-full h-9 rounded-md border px-3\"\n                />\n              )}\n              {formErrors.name && (\n                <p className=\"text-xs text-red-600\">{formErrors.name}</p>\n              )}\n            </div>\n\n            {/* Remaining fields */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n              {[\n                [\"code\", \"Product Code\", \"Auto-generated\"],\n                [\"cost\", \"Cost Price *\", \"0\"],\n                [\"price\", \"Selling Price *\", \"0\"],\n                [\"stock\", \"Stock *\", \"0\"],\n                [\"manufacturer\", \"Manufacturer *\", \"Company name\"],\n                [\"bno\", \"B.No.\", \"\"],\n                [\"mfg\", \"MFG\", \"dd/mm/yyyy\"],\n                [\"exp\", \"EXP\", \"dd/mm/yyyy\"],\n              ].map(([key, label, placeholder]) => (\n                <div key={key}>\n                  <label className=\"text-sm font-medium\">{label}</label>\n                  <input\n                    name={key}\n                    value={formData[key]}\n                    placeholder={placeholder}\n                    onChange={handleChange}\n                    className=\"w-full h-9 rounded-md border px-3\"\n                    readOnly={key === \"code\"}\n                  />\n                  {formErrors[key] && (\n                    <p className=\"text-xs text-red-600\">{formErrors[key]}</p>\n                  )}\n                </div>\n              ))}\n\n              <div>\n                <label className=\"text-sm font-medium\">Category *</label>\n                <select\n                  name=\"category\"\n                  value={formData.category}\n                  onChange={handleChange}\n                  className=\"w-full h-9 rounded-md border px-3\"\n                >\n                  <option value=\"\">Select category</option>\n                  <option value=\"Medicines\">Medicines</option>\n                  <option value=\"Surgical Equipment\">Surgical Equipment</option>\n                  <option value=\"Medical Consumables\">Medical Consumables</option>\n                  <option value=\"Lab Equipment\">Lab Equipment</option>\n                  <option value=\"Diagnostics\">Diagnostics</option>\n                  <option value=\"PPE\">Personal Protective Equipment</option>\n                  <option value=\"Orthopedic Supplies\">Orthopedic Supplies</option>\n                  <option value=\"First Aid\">First Aid</option>\n                  <option value=\"Pharmaceutical Ingredients\">Pharmaceutical Ingredients</option>\n                  <option value=\"Hospital Furniture\">Hospital Furniture</option>\n                  <option value=\"Rehabilitation Equipment\">Rehabilitation Equipment</option>\n                  <option value=\"Medical Devices\">Medical Devices</option>\n                  <option value=\"Imaging Equipment\">Imaging Equipment</option>\n                  <option value=\"Injections & Vaccines\">Injections & Vaccines</option>\n                  <option value=\"Disposables\">Disposables</option>\n                  <option value=\"Home Healthcare\">Home Healthcare</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium\">Unit *</label>\n                <select\n                  name=\"unit\"\n                  value={formData.unit}\n                  onChange={handleChange}\n                  className=\"w-full h-9 rounded-md border px-3\"\n                >\n                  <option value=\"Piece\">Piece</option>\n                  <option value=\"Strip\">Strip</option>\n                  <option value=\"Box\">Box</option>\n                  <option value=\"Bottle\">Bottle</option>\n                  <option value=\"Tablet\">Tablet</option>\n                  <option value=\"Capsule\">Capsule</option>\n                  <option value=\"Sachet\">Sachet</option>\n                  <option value=\"Tube\">Tube</option>\n                  <option value=\"Vial\">Vial</option>\n                  <option value=\"Ampoule\">Ampoule</option>\n                  <option value=\"Pack\">Pack</option>\n                  <option value=\"Ointment\">Ointment</option>\n                  <option value=\"Syrup\">Syrup</option>\n                  <option value=\"Inhaler\">Inhaler</option>\n                  <option value=\"Drop\">Drop</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium\">Status</label>\n                <select\n                  name=\"status\"\n                  value={formData.status}\n                  onChange={handleChange}\n                  className=\"w-full h-9 rounded-md border px-3\"\n                >\n                  <option value=\"Active\">Active</option>\n                  <option value=\"Inactive\">Inactive</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium\">Date *</label>\n                <input\n                  type=\"text\"\n                  name=\"date\"\n                  value={formData.date}\n                  onChange={handleChange}\n                  placeholder=\"dd/mm/yyyy\"\n                  className=\"w-full h-9 rounded-md border px-3\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Description</label>\n              <textarea\n                name=\"description\"\n                value={formData.description}\n                onChange={handleChange}\n                rows={3}\n                className=\"w-full rounded-md border px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-3\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"border px-4 py-2 rounded-md\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className={`px-4 py-2 rounded-md text-white ${\n                  loading ? \"bg-gray-400\" : \"bg-teal-600 hover:bg-teal-700\"\n                }`}\n              >\n                {loading ? \"Creating...\" : \"Create Product\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProductModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2014, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/products/ProductFilter.jsx"],"sourcesContent":["\"use client\"; // required for client-side state\n\n\nimport React from \"react\";\nimport { Search } from \"lucide-react\";\n\nconst ProductFilter = ({ searchTerm, setSearchTerm, filter, setFilter }) => {\n  const filters = [\"All\", \"Active\", \"Low Stock\", \"Out of Stock\"];\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"flex flex-col md:flex-row gap-4\">\n        {/* Search Input */}\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search by product name, code, or category...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"flex h-9 w-full rounded-md border \n            border-gray-200 bg-transparent px-3 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-400\n            border-input  py-1  transition-colors placeholder:text-muted-foreground  focus:ring-ring md:text-sm pl-10\"\n          />\n        </div>\n\n        {/* Filter Buttons */}\n        <div className=\"flex gap-2 flex-wrap\">\n          {filters.map((f) => (\n            <button\n              key={f}\n              onClick={() => setFilter(f)}\n              className={`inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors h-8 rounded-md px-3 text-xs shadow ${\n                filter === f\n                  ? \"bg-teal-600 text-white hover:bg-teal-700\"\n                  : \"border border-gray-300 border-input bg-background hover:bg-accent hover:text-accent-foreground\"\n              }`}\n            >\n              {f}\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductFilter;\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA,cAAc,iCAAiC;;;;AAM/C,MAAM,gBAAgB,CAAC,EAAE,UAAU,EAAE,aAAa,EAAE,MAAM,EAAE,SAAS,EAAE;IACrE,MAAM,UAAU;QAAC;QAAO;QAAU;QAAa;KAAe;IAE9D,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,mNAAM;4BAAC,WAAU;;;;;;sCAClB,6LAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4BAC7C,WAAU;;;;;;;;;;;;8BAOd,6LAAC;oBAAI,WAAU;8BACZ,QAAQ,GAAG,CAAC,CAAC,kBACZ,6LAAC;4BAEC,SAAS,IAAM,UAAU;4BACzB,WAAW,CAAC,iIAAiI,EAC3I,WAAW,IACP,6CACA,kGACJ;sCAED;2BARI;;;;;;;;;;;;;;;;;;;;;AAenB;KAvCM;uCAyCS"}},
    {"offset": {"line": 2103, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/pages/ProductsPage.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Package,\n  PackageCheck,\n  TriangleAlert,\n  TrendingDown,\n} from \"lucide-react\";\n\nimport ProductCard from \"../../components/products/ProductCard\";\nimport ProductTable from \"../../components/products/ProductTable\";\nimport ProductEditModel from \"../../components/products/ProductEditModel\";\nimport ProductModel from \"../../components/products/ProductModel\"; // New product modal\nimport ProductFilter from \"../../components/products/ProductFilter\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nexport default function ProductsPage() {\n  const [products, setProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [filter, setFilter] = useState(\"All\");\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [newProductOpen, setNewProductOpen] = useState(false); // For new product modal\n  const [editingProductId, setEditingProductId] = useState(null);\n\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  /* ---------------- FETCH PRODUCTS ---------------- */\n  const fetchProducts = async () => {\n    try {\n      const res = await apiRequest(\"/products\", { method: \"GET\" });\n      setProducts(res.data.data || res.data);\n    } catch (err) {\n      setErrorMessage(\n        err?.response?.data?.message || \"Failed to fetch products\"\n      );\n      setShowError(true);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  /* ---------------- FILTERING ---------------- */\n  const filteredProducts = products.filter((p) => {\n    const matchesSearch =\n      p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      p.code.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      p.category.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesFilter =\n      filter === \"All\" ||\n      (filter === \"Active\" && p.status === \"Active\") ||\n      (filter === \"Low Stock\" && p.stock <= 10) ||\n      (filter === \"Out of Stock\" && p.stock === 0);\n\n    return matchesSearch && matchesFilter;\n  });\n\n  /* ---------------- EDIT ACTION ---------------- */\n  const openEditModal = (product) => {\n    setEditingProductId(product._id);\n    setModalOpen(true);\n  };\n\n  const closeModal = () => {\n    setModalOpen(false);\n    setEditingProductId(null);\n    fetchProducts(); // refresh list after update\n  };\n\n  /* ---------------- NEW PRODUCT ACTION ---------------- */\n  const openNewProductModal = () => {\n    setNewProductOpen(true);\n  };\n\n  const closeNewProductModal = () => {\n    setNewProductOpen(false);\n    fetchProducts(); // refresh list after adding new product\n  };\n\n  /* ---------------- STATS ---------------- */\n  const stats = [\n    {\n      title: \"Total Products\",\n      count: products.length,\n      color: \"blue\",\n      Icon: Package,\n    },\n    {\n      title: \"Active Products\",\n      count: products.filter((p) => p.status === \"Active\").length,\n      color: \"pink\",\n      Icon: PackageCheck,\n    },\n    {\n      title: \"Low Stock\",\n      count: products.filter((p) => p.stock <= 10).length,\n      color: \"amber\",\n      Icon: TriangleAlert,\n    },\n    {\n      title: \"Out of Stock\",\n      count: products.filter((p) => p.stock === 0).length,\n      color: \"red\",\n      Icon: TrendingDown,\n    },\n  ];\n\n  return (\n    <main className=\"p-6\">\n      {/* ERROR MODAL */}\n      {showError && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]\">\n          <div className=\"bg-white p-6 rounded-xl text-center\">\n            <TriangleAlert className=\"w-12 h-12 text-red-600 mx-auto mb-2\" />\n            <h2 className=\"font-bold text-red-700\">Error</h2>\n            <p>{errorMessage}</p>\n            <button\n              onClick={() => setShowError(false)}\n              className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded-md\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* HEADER */}\n      <div className=\"flex flex-col md:flex-row justify-between gap-4 mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Product Inventory</h1>\n          <p className=\"text-slate-600\">Manage your product catalog</p>\n        </div>\n\n        {/* + NEW PRODUCT BUTTON */}\n        <div>\n          <button\n            onClick={openNewProductModal}\n            className=\"bg-teal-600 text-white px-4 py-2 rounded shadow hover:bg-teal-700 font-semibold\"\n          >\n            + New Product\n          </button>\n        </div>\n      </div>\n\n      {/* STATS */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        {stats.map((stat, i) => (\n          <ProductCard key={i} {...stat} />\n        ))}\n      </div>\n\n      <ProductFilter\n        searchTerm={searchTerm}\n        setSearchTerm={setSearchTerm}\n        filter={filter}\n        setFilter={setFilter}\n      />\n\n      {/* TABLE */}\n      <ProductTable products={filteredProducts} onEdit={openEditModal} />\n\n      {/* EDIT MODAL */}\n      {modalOpen && editingProductId && (\n        <ProductEditModel productId={editingProductId} onClose={closeModal} />\n      )}\n\n      {/* NEW PRODUCT MODAL */}\n      {newProductOpen && <ProductModel onClose={closeNewProductModal} />}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2366, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/products/page.jsx"],"sourcesContent":["// app/pos/page.jsx\n\"use client\";\n\nimport ProductsPage from \"../components/pages/ProductsPage\";\nexport default function Product() {\n  return (\n   <ProductsPage/>\n  );\n}\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;AAGnB;AAFA;;;AAGe,SAAS;IACtB,qBACC,6LAAC,yJAAY;;;;;AAEhB;KAJwB"}}]
}