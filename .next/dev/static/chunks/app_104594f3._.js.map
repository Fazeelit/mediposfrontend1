{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/authservice/api.jsx"],"sourcesContent":["// app/authservice/page.jsx\n\"use client\";\n\nimport axios from \"axios\";\nimport { toast } from \"react-hot-toast\";\n\nconst BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ||\n  \"https://mediposbackend.onrender.com/api\";\n\n/**\n * Generic API request function\n */\nexport async function apiRequest(\n  endpoint,\n  {\n    method = \"GET\",\n    data = null,\n    headers = {},\n    includeAuth = false,\n    formData = false,\n    successMessage = null,\n    timeout = 30 * 60 * 1000, // 30 minutes\n    params = null,\n    onUploadProgress = null,\n  } = {}\n) {\n  try {\n    let finalHeaders = { ...headers };\n\n    // ---------------------------------------------------------\n    // Handle Content-Type logic\n    // ---------------------------------------------------------\n    if (formData) {\n      // VERY IMPORTANT: Do NOT set Content-Type here\n      // Browser will generate correct boundary\n      delete finalHeaders[\"Content-Type\"];\n    } else if (data && typeof data === \"object\") {\n      finalHeaders[\"Content-Type\"] = \"application/json\";\n      data = JSON.stringify(data);\n    }\n\n    // ---------------------------------------------------------\n    // Authorization Header\n    // ---------------------------------------------------------\n    if (includeAuth && typeof window !== \"undefined\") {\n      const token = localStorage.getItem(\"authToken\");\n      if (token) finalHeaders[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    // ---------------------------------------------------------\n    // Create Request URL\n    // ---------------------------------------------------------\n    const url = `${BASE_URL}${endpoint.startsWith(\"/\") ? endpoint : \"/\" + endpoint}`;\n\n    console.log(\"API Request:\", {\n      url,\n      method,\n      sendingFormData: formData,\n      headers: finalHeaders,\n      params,\n      data,\n    });\n\n    // ---------------------------------------------------------\n    // Axios Config\n    // ---------------------------------------------------------\n    const config = {\n      url,\n      method: method.toUpperCase(),\n      headers: finalHeaders,\n      timeout,\n      maxBodyLength: Infinity,\n      maxContentLength: Infinity,\n    };\n\n    if (params) config.params = params;\n\n    if (typeof onUploadProgress === \"function\") {\n      config.onUploadProgress = onUploadProgress;\n    }\n\n    // Attach body only for non-GET/HEAD\n    if (![\"GET\", \"HEAD\"].includes(config.method)) {\n      config.data = data;\n    }\n\n    // ---------------------------------------------------------\n    // Make Request\n    // ---------------------------------------------------------\n    const response = await axios(config);\n\n    // ---------------------------------------------------------\n    // Success Toast\n    // ---------------------------------------------------------\n    const msg = successMessage || response.data?.message;\n    if (msg && typeof window !== \"undefined\") {\n      toast.success(msg);\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(\"API Request Error:\", error);\n\n    const errorMessage =\n      error.response?.data?.message ||\n      error.response?.data?.error ||\n      (error.code === \"ECONNABORTED\"\n        ? \"Request timed out. Please try again.\"\n        : null) ||\n      (error.message?.includes(\"Network Error\")\n        ? \"Network error â€” check your internet connection.\"\n        : null) ||\n      error.message ||\n      \"Something went wrong\";\n\n    if (typeof window !== \"undefined\") toast.error(errorMessage);\n\n    throw new Error(errorMessage);\n  }\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAOzB;AAJF;AACA;AAHA;;;AAKA,MAAM,WACJ,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IACpC;AAKK,eAAe,WACpB,QAAQ,EACR,EACE,SAAS,KAAK,EACd,OAAO,IAAI,EACX,UAAU,CAAC,CAAC,EACZ,cAAc,KAAK,EACnB,WAAW,KAAK,EAChB,iBAAiB,IAAI,EACrB,UAAU,KAAK,KAAK,IAAI,EACxB,SAAS,IAAI,EACb,mBAAmB,IAAI,EACxB,GAAG,CAAC,CAAC;IAEN,IAAI;QACF,IAAI,eAAe;YAAE,GAAG,OAAO;QAAC;QAEhC,4DAA4D;QAC5D,4BAA4B;QAC5B,4DAA4D;QAC5D,IAAI,UAAU;YACZ,+CAA+C;YAC/C,yCAAyC;YACzC,OAAO,YAAY,CAAC,eAAe;QACrC,OAAO,IAAI,QAAQ,OAAO,SAAS,UAAU;YAC3C,YAAY,CAAC,eAAe,GAAG;YAC/B,OAAO,KAAK,SAAS,CAAC;QACxB;QAEA,4DAA4D;QAC5D,uBAAuB;QACvB,4DAA4D;QAC5D,IAAI,eAAe,+CAAkB,aAAa;YAChD,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO,YAAY,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAC9D;QAEA,4DAA4D;QAC5D,qBAAqB;QACrB,4DAA4D;QAC5D,MAAM,MAAM,GAAG,WAAW,SAAS,UAAU,CAAC,OAAO,WAAW,MAAM,UAAU;QAEhF,QAAQ,GAAG,CAAC,gBAAgB;YAC1B;YACA;YACA,iBAAiB;YACjB,SAAS;YACT;YACA;QACF;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,SAAS;YACb;YACA,QAAQ,OAAO,WAAW;YAC1B,SAAS;YACT;YACA,eAAe;YACf,kBAAkB;QACpB;QAEA,IAAI,QAAQ,OAAO,MAAM,GAAG;QAE5B,IAAI,OAAO,qBAAqB,YAAY;YAC1C,OAAO,gBAAgB,GAAG;QAC5B;QAEA,oCAAoC;QACpC,IAAI,CAAC;YAAC;YAAO;SAAO,CAAC,QAAQ,CAAC,OAAO,MAAM,GAAG;YAC5C,OAAO,IAAI,GAAG;QAChB;QAEA,4DAA4D;QAC5D,eAAe;QACf,4DAA4D;QAC5D,MAAM,WAAW,MAAM,IAAA,mJAAK,EAAC;QAE7B,4DAA4D;QAC5D,gBAAgB;QAChB,4DAA4D;QAC5D,MAAM,MAAM,kBAAkB,SAAS,IAAI,EAAE;QAC7C,IAAI,OAAO,+CAAkB,aAAa;YACxC,mKAAK,CAAC,OAAO,CAAC;QAChB;QAEA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,MAAM,eACJ,MAAM,QAAQ,EAAE,MAAM,WACtB,MAAM,QAAQ,EAAE,MAAM,SACtB,CAAC,MAAM,IAAI,KAAK,iBACZ,yCACA,IAAI,KACR,CAAC,MAAM,OAAO,EAAE,SAAS,mBACrB,oDACA,IAAI,KACR,MAAM,OAAO,IACb;QAEF,wCAAmC,mKAAK,CAAC,KAAK,CAAC;QAE/C,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/POS/ProductsCard.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nexport default function ProductsCard({ products, addToCart }) {\n  const [search, setSearch] = useState(\"\");\n  const [showToast, setShowToast] = useState(false);\n\n  /* =========================\n     MERGE PRODUCTS WITH SAME NAME\n     ========================= */\n  const mergedProducts = useMemo(() => {\n    const map = new Map();\n\n    products.forEach((p) => {\n      const key = p.name.trim().toLowerCase();\n      if (map.has(key)) {\n        const existing = map.get(key);\n        map.set(key, {\n          ...existing,\n          stock: existing.stock + (Number(p.stock) || 0),\n          price: p.price, // optionally keep last price or min/max\n        });\n      } else {\n        map.set(key, { ...p, stock: Number(p.stock) || 0 });\n      }\n    });\n\n    return Array.from(map.values());\n  }, [products]);\n\n  /* =========================\n     FILTER PRODUCTS BY SEARCH\n     ========================= */\n  const filteredProducts = useMemo(() => {\n    if (!search) return mergedProducts;\n    return mergedProducts.filter((p) =>\n      p.name.toLowerCase().includes(search.toLowerCase())\n    );\n  }, [search, mergedProducts]);\n\n  /* =========================\n     ADD PRODUCT\n     ========================= */\n  const handleAdd = async (productId) => {\n    if (!productId) return;\n\n    try {\n      const res = await apiRequest(\n        `/products/getProductById/${productId}`,\n        { method: \"GET\" }\n      );\n\n      const product = res?.data || res;\n      if (!product) throw new Error(\"Product not found\");\n\n      addToCart(product);\n      setSearch(\"\");\n      setShowToast(true);\n      setTimeout(() => setShowToast(false), 2000);\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to fetch product\");\n    }\n  };\n\n  /* =========================\n     ICONS\n     ========================= */\n  const PlusIcon = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n      viewBox=\"0 0 24 24\" stroke=\"currentColor\" className=\"w-4 h-4\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\n        strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n    </svg>\n  );\n\n  const CheckCircleIcon = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n      viewBox=\"0 0 24 24\" stroke=\"currentColor\" className=\"w-4 h-4\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\n        strokeWidth={2} d=\"M9 12l2 2 4-4\" />\n    </svg>\n  );\n\n  return (\n    <div>\n      {/* =========================\n         SEARCH BAR\n         ========================= */}\n      <div className=\"p-4\">\n        <div className=\"relative\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M21 21l-4.35-4.35m1.85-5.65a7 7 0 11-14 0 7 7 0 0114 0z\"\n            />\n          </svg>\n\n          <input\n            type=\"text\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search product...\"\n            className=\"w-full rounded-full border pl-11 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-teal-600\"\n          />\n        </div>\n      </div>\n\n      {/* =========================\n         TOAST\n         ========================= */}\n      {showToast && (\n        <div className=\"fixed bottom-6 left-1/2 -translate-x-1/2 bg-teal-600 text-white px-4 py-2 rounded-md flex gap-2 z-50\">\n          <CheckCircleIcon /> Item added to cart\n        </div>\n      )}\n\n      {/* =========================\n         PRODUCT LIST\n         ========================= */}\n      <div className=\"h-[65vh] overflow-y-auto px-4\">\n        <ul className=\"space-y-2\">\n          {filteredProducts.map((item) => (\n            <li\n              key={item._id || item.name}\n              className=\"flex justify-between items-center bg-white border rounded-lg px-4 py-3 hover:bg-teal-50\"\n            >\n              <div>\n                <h3 className=\"text-sm font-semibold\">{item.name}</h3>\n                <p className=\"text-xs text-slate-500\">\n                  Total Stock: {item.stock}\n                </p>\n              </div>\n\n              <div className=\"flex items-center gap-4\">\n                <span className=\"font-bold text-teal-600\">\n                  Rs.{item.price}\n                </span>\n\n                <button\n                  onClick={() => handleAdd(item._id)}\n                  className=\"bg-teal-600 text-white h-8 px-3 rounded-md\"\n                >\n                  <PlusIcon />\n                </button>\n              </div>\n            </li>\n          ))}\n\n          {filteredProducts.length === 0 && (\n            <li className=\"text-center text-sm text-slate-500 py-6\">\n              No products found\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAE;;IAC1D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C;;+BAE6B,GAC7B,MAAM,iBAAiB,IAAA,wKAAO;gDAAC;YAC7B,MAAM,MAAM,IAAI;YAEhB,SAAS,OAAO;wDAAC,CAAC;oBAChB,MAAM,MAAM,EAAE,IAAI,CAAC,IAAI,GAAG,WAAW;oBACrC,IAAI,IAAI,GAAG,CAAC,MAAM;wBAChB,MAAM,WAAW,IAAI,GAAG,CAAC;wBACzB,IAAI,GAAG,CAAC,KAAK;4BACX,GAAG,QAAQ;4BACX,OAAO,SAAS,KAAK,GAAG,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC;4BAC7C,OAAO,EAAE,KAAK;wBAChB;oBACF,OAAO;wBACL,IAAI,GAAG,CAAC,KAAK;4BAAE,GAAG,CAAC;4BAAE,OAAO,OAAO,EAAE,KAAK,KAAK;wBAAE;oBACnD;gBACF;;YAEA,OAAO,MAAM,IAAI,CAAC,IAAI,MAAM;QAC9B;+CAAG;QAAC;KAAS;IAEb;;+BAE6B,GAC7B,MAAM,mBAAmB,IAAA,wKAAO;kDAAC;YAC/B,IAAI,CAAC,QAAQ,OAAO;YACpB,OAAO,eAAe,MAAM;0DAAC,CAAC,IAC5B,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;;QAEpD;iDAAG;QAAC;QAAQ;KAAe;IAE3B;;+BAE6B,GAC7B,MAAM,YAAY,OAAO;QACvB,IAAI,CAAC,WAAW;QAEhB,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,2IAAU,EAC1B,CAAC,yBAAyB,EAAE,WAAW,EACvC;gBAAE,QAAQ;YAAM;YAGlB,MAAM,UAAU,KAAK,QAAQ;YAC7B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;YAE9B,UAAU;YACV,UAAU;YACV,aAAa;YACb,WAAW,IAAM,aAAa,QAAQ;QACxC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR;IACF;IAEA;;+BAE6B,GAC7B,MAAM,WAAW,kBACf,6LAAC;YAAI,OAAM;YAA6B,MAAK;YAC3C,SAAQ;YAAY,QAAO;YAAe,WAAU;sBACpD,cAAA,6LAAC;gBAAK,eAAc;gBAAQ,gBAAe;gBACzC,aAAa;gBAAG,GAAE;;;;;;;;;;;IAIxB,MAAM,kBAAkB,kBACtB,6LAAC;YAAI,OAAM;YAA6B,MAAK;YAC3C,SAAQ;YAAY,QAAO;YAAe,WAAU;sBACpD,cAAA,6LAAC;gBAAK,eAAc;gBAAQ,gBAAe;gBACzC,aAAa;gBAAG,GAAE;;;;;;;;;;;IAIxB,qBACE,6LAAC;;0BAIC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,OAAM;4BACN,MAAK;4BACL,SAAQ;4BACR,QAAO;4BACP,WAAU;sCAEV,cAAA,6LAAC;gCACC,eAAc;gCACd,gBAAe;gCACf,aAAa;gCACb,GAAE;;;;;;;;;;;sCAIN,6LAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;4BACzC,aAAY;4BACZ,WAAU;;;;;;;;;;;;;;;;;YAQf,2BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;;;;oBAAkB;;;;;;;0BAOvB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;;wBACX,iBAAiB,GAAG,CAAC,CAAC,qBACrB,6LAAC;gCAEC,WAAU;;kDAEV,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAyB,KAAK,IAAI;;;;;;0DAChD,6LAAC;gDAAE,WAAU;;oDAAyB;oDACtB,KAAK,KAAK;;;;;;;;;;;;;kDAI5B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAK,WAAU;;oDAA0B;oDACpC,KAAK,KAAK;;;;;;;0DAGhB,6LAAC;gDACC,SAAS,IAAM,UAAU,KAAK,GAAG;gDACjC,WAAU;0DAEV,cAAA,6LAAC;;;;;;;;;;;;;;;;;+BAnBA,KAAK,GAAG,IAAI,KAAK,IAAI;;;;;wBAyB7B,iBAAiB,MAAM,KAAK,mBAC3B,6LAAC;4BAAG,WAAU;sCAA0C;;;;;;;;;;;;;;;;;;;;;;;AAQpE;GAnKwB;KAAA"}},
    {"offset": {"line": 395, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/POS/CartCard.jsx"],"sourcesContent":["\"use client\";\n\nimport { Trash2, Minus, Plus, ShoppingCart, Check } from \"lucide-react\";\nimport { RiDeleteBin6Line } from \"react-icons/ri\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\n\nexport default function CartCard({ cart, removeItem, increaseQty, decreaseQty }) {\n  const router = useRouter();\n  const [discount, setDiscount] = useState(0);\n\n  const cartWithQty = cart.map((item) => ({ ...item, qty: item.qty || 1 }));\n\n  const subtotal = cartWithQty.reduce(\n    (sum, item) => sum + item.price * item.qty,\n    0\n  );\n\n  const total = Math.max(subtotal - Number(discount || 0), 0);\n\n  const handlePrintBill = () => {\n    if (cartWithQty.length === 0) return;\n    localStorage.setItem(\n      \"printCart\",\n      JSON.stringify({ items: cartWithQty, discount, subtotal, total })\n    );\n    router.push(\"/Print\");\n  };\n\n  return (\n    <div className=\"space-y-4 flex flex-col h-full w-full\">\n      <div className=\"rounded-xl shadow-xl bg-gradient-to-br from-white to-slate-50 flex flex-col mt-5 min-h-[65vh]\">\n\n        {/* Header */}\n        <div className=\"p-6 border-b border-slate-200 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-t-lg\">\n          <div className=\"font-semibold flex items-center justify-between\">\n            <span className=\"flex items-center\">\n              <ShoppingCart className=\"w-5 h-5 mr-2\" />\n              Cart ({cart.length})\n            </span>\n            {cart.length > 0 && (\n              <button\n                className=\"px-3 h-8 rounded-md text-xs hover:bg-white/20\"\n                onClick={() => removeItem(\"all\")}\n              >\n                <Trash2 className=\"w-4 h-4\" />\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Cart Items */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {cart.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center h-full text-slate-400\">\n              <ShoppingCart className=\"w-16 h-16 mb-4\" />\n              <p className=\"text-lg\">Cart is empty</p>\n              <p className=\"text-sm\">Add products to start</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {cartWithQty.map((item, index) => (\n                <div\n                  key={item._id || item.id || index}\n                  className=\"bg-white rounded-xl p-3 shadow-sm border border-slate-100\"\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-medium text-slate-900 text-sm\">\n                      {item.name}\n                    </h4>\n                    <button\n                      onClick={() => removeItem(index)}\n                      className=\"text-red-500 hover:bg-red-50 h-6 w-6 rounded-md flex items-center justify-center\"\n                    >\n                      <RiDeleteBin6Line />\n                    </button>\n                  </div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n\n                      {/* DECREASE */}\n                      <button\n                        onClick={() => decreaseQty(item._id || item.id)}\n                        className=\"bg-teal-500 hover:bg-teal-600\n                          rounded-md h-7 w-7 flex items-center justify-center\"\n                      >\n                        <Minus className=\"w-3 h-3 text-white\" />\n                      </button>\n\n                      <span className=\"w-8 text-center font-semibold text-slate-600\">\n                        {item.qty}\n                      </span>\n\n                      {/* INCREASE */}\n                      <button\n                        onClick={() => increaseQty(item._id || item.id)}\n                        className=\"bg-teal-500 hover:bg-teal-600\n                          rounded-md h-7 w-7 flex items-center justify-center\"\n                      >\n                        <Plus className=\"w-3 h-3 text-white\" />\n                      </button>\n\n                    </div>\n\n                    <div className=\"text-right\">\n                      <p className=\"text-xs text-slate-500\">\n                        Rs.{item.price.toFixed(2)} each\n                      </p>\n                      <p className=\"font-bold text-teal-600\">\n                        Rs.{(item.qty * item.price).toFixed(2)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        {cart.length > 0 && (\n          <div className=\"border-t border-slate-200 p-4 space-y-3 bg-slate-50\">\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-slate-600\">Subtotal</span>\n              <span className=\"font-medium\">Rs.{subtotal.toFixed(2)}</span>\n            </div>\n\n            <div className=\"flex justify-between items-center text-sm\">\n              <span className=\"text-slate-600\">Discount</span>\n              <input\n                type=\"number\"\n                min=\"0\"\n                value={discount}\n                onChange={(e) => setDiscount(e.target.value)}\n                className=\"w-24 border rounded-md px-2 py-1 text-right text-sm\"\n                placeholder=\"0\"\n              />\n            </div>\n\n            <div className=\"flex justify-between text-lg font-bold pt-2 border-t border-slate-300\">\n              <span>Total</span>\n              <span className=\"text-teal-600\">Rs.{total.toFixed(2)}</span>\n            </div>\n\n            <button\n              className=\"w-full h-12 bg-gradient-to-r from-teal-500 to-teal-600\n                text-white rounded-md font-semibold flex items-center\n                justify-center mt-3 shadow-lg hover:opacity-90\"\n              onClick={handlePrintBill}\n            >\n              <Check className=\"w-5 h-5 mr-2\" /> Print Bill\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 800, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/components/pages/POSPage.jsx"],"sourcesContent":["\"use client\"; // required for client-side state\n\nimport { useState, useEffect } from \"react\";\nimport ProductsCard from \"../POS/ProductsCard\";\nimport CartCard from \"../POS/CartCard\";\nimport { apiRequest } from \"@/app/authservice/api\";\n\nexport default function POSPage() {\n  const [cart, setCart] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  // ---------------- FETCH ALL PRODUCTS ----------------\n  const fetchProducts = async () => {\n    try {\n      setLoading(true);\n      const res = await apiRequest(\"/products\", { method: \"GET\" });\n      setProducts(res?.data || res); // adapt to your API response structure\n    } catch (err) {\n      console.error(\"Failed to fetch products:\", err);\n      setError(err.message || \"Failed to fetch products\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  // ---------------- CART HANDLERS ----------------\n  const addToCart = async (item) => {\n    try {\n      // Fetch full product details by ID before adding to cart\n      const productId = item._id || item.id;\n      const productRes = await apiRequest(`/products/getProductById/${productId}`, {\n        method: \"GET\",\n      });\n      const product = productRes?.data || productRes;\n\n      if (!product) throw new Error(\"Product not found\");\n\n      setCart((prev) => {\n        const exists = prev.find((i) => i.id === product._id);\n        if (exists) {\n          return prev.map((i) =>\n            i.id === product._id ? { ...i, qty: i.qty + 1 } : i\n          );\n        }\n        return [...prev, { ...product, qty: 1, id: product._id }];\n      });\n    } catch (err) {\n      console.error(\"Failed to add product to cart:\", err);\n      alert(err.message || \"Failed to add product\");\n    }\n  };\n\n  const removeItem = (index) => {\n    if (index === \"all\") return setCart([]);\n    const newCart = [...cart];\n    newCart.splice(index, 1);\n    setCart(newCart);\n  };\n\n  const increaseQty = (id) => {\n    setCart((prev) =>\n      prev.map((item) =>\n        item.id === id ? { ...item, qty: item.qty + 1 } : item\n      )\n    );\n  };\n\n  const decreaseQty = (id) => {\n    setCart((prev) =>\n      prev.map((item) =>\n        item.id === id\n          ? { ...item, qty: item.qty > 1 ? item.qty - 1 : 1 }\n          : item\n      )\n    );\n  };\n\n  // ---------------- RENDER ----------------\n  if (loading) return <p>Loading products...</p>;\n  if (error) return <p className=\"text-red-600\">{error}</p>;\n\n  return (\n    <div className=\"md:-ml-60 flex flex-col md:flex-row gap-4 p-4 md:-mt-10\">\n      <div className=\"md:w-2/3\">\n        <ProductsCard products={products} addToCart={addToCart} />\n      </div>\n      <div className=\"md:w-1/3\">\n        <CartCard\n          cart={cart}\n          removeItem={removeItem}\n          increaseQty={increaseQty}\n          decreaseQty={decreaseQty}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA,cAAc,iCAAiC;;;;;AAOhC,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,uDAAuD;IACvD,MAAM,gBAAgB;QACpB,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,IAAA,2IAAU,EAAC,aAAa;gBAAE,QAAQ;YAAM;YAC1D,YAAY,KAAK,QAAQ,MAAM,uCAAuC;QACxE,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,0KAAS;6BAAC;YACR;QACF;4BAAG,EAAE;IAEL,kDAAkD;IAClD,MAAM,YAAY,OAAO;QACvB,IAAI;YACF,yDAAyD;YACzD,MAAM,YAAY,KAAK,GAAG,IAAI,KAAK,EAAE;YACrC,MAAM,aAAa,MAAM,IAAA,2IAAU,EAAC,CAAC,yBAAyB,EAAE,WAAW,EAAE;gBAC3E,QAAQ;YACV;YACA,MAAM,UAAU,YAAY,QAAQ;YAEpC,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;YAE9B,QAAQ,CAAC;gBACP,MAAM,SAAS,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,QAAQ,GAAG;gBACpD,IAAI,QAAQ;oBACV,OAAO,KAAK,GAAG,CAAC,CAAC,IACf,EAAE,EAAE,KAAK,QAAQ,GAAG,GAAG;4BAAE,GAAG,CAAC;4BAAE,KAAK,EAAE,GAAG,GAAG;wBAAE,IAAI;gBAEtD;gBACA,OAAO;uBAAI;oBAAM;wBAAE,GAAG,OAAO;wBAAE,KAAK;wBAAG,IAAI,QAAQ,GAAG;oBAAC;iBAAE;YAC3D;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kCAAkC;YAChD,MAAM,IAAI,OAAO,IAAI;QACvB;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,IAAI,UAAU,OAAO,OAAO,QAAQ,EAAE;QACtC,MAAM,UAAU;eAAI;SAAK;QACzB,QAAQ,MAAM,CAAC,OAAO;QACtB,QAAQ;IACV;IAEA,MAAM,cAAc,CAAC;QACnB,QAAQ,CAAC,OACP,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,KAAK;oBAAE,GAAG,IAAI;oBAAE,KAAK,KAAK,GAAG,GAAG;gBAAE,IAAI;IAGxD;IAEA,MAAM,cAAc,CAAC;QACnB,QAAQ,CAAC,OACP,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,KACR;oBAAE,GAAG,IAAI;oBAAE,KAAK,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI;gBAAE,IAChD;IAGV;IAEA,2CAA2C;IAC3C,IAAI,SAAS,qBAAO,6LAAC;kBAAE;;;;;;IACvB,IAAI,OAAO,qBAAO,6LAAC;QAAE,WAAU;kBAAgB;;;;;;IAE/C,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,uJAAY;oBAAC,UAAU;oBAAU,WAAW;;;;;;;;;;;0BAE/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,mJAAQ;oBACP,MAAM;oBACN,YAAY;oBACZ,aAAa;oBACb,aAAa;;;;;;;;;;;;;;;;;AAKvB;GA/FwB;KAAA"}},
    {"offset": {"line": 963, "column": 0}, "map": {"version":3,"sources":["file:///E:/Backup/mediposfrontend1/app/pos/page.jsx"],"sourcesContent":["// app/pos/page.jsx\n\"use client\";\n\nimport MainLayout from \"../components/MainLayout\";\nimport POSPage from \"../components/pages/POSPage\";\n\nexport default function POSRoute() {\n  return (\n    <MainLayout>\n      <POSPage />\n    </MainLayout>\n  );\n}\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;AAGnB;AACA;AAHA;;;;AAKe,SAAS;IACtB,qBACE,6LAAC,8IAAU;kBACT,cAAA,6LAAC,oJAAO;;;;;;;;;;AAGd;KANwB"}}]
}